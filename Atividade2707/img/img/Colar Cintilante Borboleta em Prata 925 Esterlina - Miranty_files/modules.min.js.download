!function(a,b){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;k>j;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);return!e||p(e)&&0===e.length?this.renderTokens(a[4],b,c,d):void 0},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.3.0",a.tags=["<<",">>"];var y=new n;return a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n,a});var Hogan={};!function(a){function b(a){return String(null===a||void 0===a?"":a)}function c(a){return a=b(a),k.test(a)?a.replace(f,"&amp;").replace(g,"&lt;").replace(h,"&gt;").replace(i,"&#39;").replace(j,"&quot;"):a}function d(a,b,c){var d;return b&&"object"==typeof b&&(null!=b[a]?d=b[a]:c&&b.get&&"function"==typeof b.get&&(d=b.get(a))),d}function e(a,b,c,d,e,f){function g(){}function h(){}g.prototype=a,h.prototype=a.subs;var i,j=new g;j.subs=new h,j.subsText={},j.buf="",d=d||{},j.stackSubs=d,j.subsText=f;for(i in b)d[i]||(d[i]=b[i]);for(i in d)j.subs[i]=d[i];e=e||{},j.stackPartials=e;for(i in c)e[i]||(e[i]=c[i]);for(i in e)j.partials[i]=e[i];return j}function b(a){return String(null===a||void 0===a?"":a)}if(a.Template=function(a,b,c,d){a=a||{},this.r=a.code||this.r,this.c=c,this.options=d||{},this.text=b||"",this.partials=a.partials||{},this.subs=a.subs||{},this.buf=""},"function"==typeof a.Template){var f=/&/g,g=/</g,h=/>/g,i=/\'/g,j=/\"/g,k=/[&<>\"\']/;a.Template.prototype={r:function(a,b,c){return""},v:c,t:b,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},ep:function(a,b){var c=this.partials[a],d=b[c.name];if(c.instance&&c.base==d)return c.instance;if("string"==typeof d){if(!this.c)throw new Error("No compiler available.");d=this.c.compile(d,this.options)}if(!d)return null;if(this.partials[a].base=d,c.subs){b.stackText||(b.stackText={});for(key in c.subs)b.stackText[key]||(b.stackText[key]=void 0!==this.activeSub&&b.stackText[this.activeSub]?b.stackText[this.activeSub]:this.text);d=e(d,c.subs,c.partials,this.stackSubs,this.stackPartials,b.stackText)}return this.partials[a].instance=d,d},rp:function(a,b,c,d){var e=this.ep(a,c);return e?e.ri(b,c,d):""},rs:function(a,b,c){var d=a[a.length-1];if(!l(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return l(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ms(a,b,c,d,e,f,g)),h=!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,b,c,e){var f,g=a.split("."),h=this.f(g[0],b,c,e),i=this.options.modelGet,j=null;if("."===a&&l(b[b.length-2]))h=b[b.length-1];else for(var k=1;k<g.length;k++)f=d(g[k],h,i),null!=f?(j=h,h=f):h="";return e&&!h?!1:(e||"function"!=typeof h||(b.push(j),h=this.mv(h,b,c),b.pop()),h)},f:function(a,b,c,e){for(var f=!1,g=null,h=!1,i=this.options.modelGet,j=b.length-1;j>=0;j--)if(g=b[j],f=d(a,g,i),null!=f){h=!0;break}return h?(e||"function"!=typeof f||(f=this.mv(f,b,c)),f):e?!1:""},ls:function(a,c,d,e,f){var g=this.options.delimiters;return this.options.delimiters=f,this.b(this.ct(b(a.call(c,e)),c,d)),this.options.delimiters=g,!1},ct:function(a,b,c){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(a,this.options).render(b,c)},b:function(a){this.buf+=a},fl:function(){var a=this.buf;return this.buf="",a},ms:function(a,b,c,d,e,f,g){var h,i=b[b.length-1],j=a.call(i);return"function"==typeof j?d?!0:(h=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(j,i,c,h.substring(e,f),g)):j},mv:function(a,c,d){var e=c[c.length-1],f=a.call(e);return"function"==typeof f?this.ct(b(f.call(e)),e,d):f},sub:function(a,b,c,d){var e=this.subs[a];e&&(this.activeSub=a,e(b,c,this,d),this.activeSub=!1)}};var l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;e>d;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function e(b,c,d,h){var i=[],j=null,k=null,l=null;for(k=d[d.length-1];b.length>0;){if(l=b.shift(),k&&"<"==k.tag&&!(l.tag in t))throw new Error("Illegal content in < super tag.");if(a.tags[l.tag]<=a.tags.$||f(l,h))d.push(l),l.nodes=e(b,l.tag,d,h);else{if("/"==l.tag){if(0===d.length)throw new Error("Closing tag without opener: /"+l.n);if(j=d.pop(),l.n!=j.n&&!g(l.n,j.n,h))throw new Error("Nesting error: "+j.n+" vs. "+l.n);return j.end=l.i,i}"\n"==l.tag&&(l.last=0==b.length||"\n"==b[0].tag)}i.push(l)}if(d.length>0)throw new Error("missing closing tag: "+d.pop().n);return i}function f(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].o==a.n)return a.tag="#",!0}function g(a,b,c){for(var d=0,e=c.length;e>d;d++)if(c[d].c==a&&c[d].o==b)return!0}function h(a){var b=[];for(var c in a)b.push('"'+j(c)+'": function(c,p,t,i) {'+a[c]+"}");return"{ "+b.join(",")+" }"}function i(a){var b=[];for(var c in a.partials)b.push('"'+j(c)+'":{name:"'+j(a.partials[c].name)+'", '+i(a.partials[c])+"}");return"partials: {"+b.join(",")+"}, subs: "+h(a.subs)}function j(a){return a.replace(s,"\\\\").replace(p,'\\"').replace(q,"\\n").replace(r,"\\r")}function k(a){return~a.indexOf(".")?"d":"f"}function l(a,b){var c="<"+(b.prefix||""),d=c+a.n+u++;return b.partials[d]={name:a.n,partials:{}},b.code+='t.b(t.rp("'+j(d)+'",c,p,"'+(a.indent||"")+'"));',d}function m(a,b){b.code+="t.b(t.t(t."+k(a.n)+'("'+j(a.n)+'",c,p,0)));'}function n(a){return"t.b("+a+");"}var o=/\S/,p=/\"/g,q=/\n/g,r=/\r/g,s=/\\/g;a.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},a.scan=function(e,f){function g(){s.length>0&&(t.push({tag:"_t",text:new String(s)}),s="")}function h(){for(var b=!0,c=w;c<t.length;c++)if(b=a.tags[t[c].tag]<a.tags._v||"_t"==t[c].tag&&null===t[c].text.match(o),!b)return!1;return b}function i(a,b){if(g(),a&&h())for(var c,d=w;d<t.length;d++)t[d].text&&((c=t[d+1])&&">"==c.tag&&(c.indent=t[d].text.toString()),t.splice(d,1));else b||t.push({tag:"\n"});u=!1,w=t.length}function j(a,b){var d="="+y,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");return x=f[0],y=f[f.length-1],e+d.length-1}var k=e.length,l=0,m=1,n=2,p=l,q=null,r=null,s="",t=[],u=!1,v=0,w=0,x="{{",y="}}";for(f&&(f=f.split(" "),x=f[0],y=f[1]),v=0;k>v;v++)p==l?d(x,e,v)?(--v,g(),p=m):"\n"==e.charAt(v)?i(u):s+=e.charAt(v):p==m?(v+=x.length-1,r=a.tags[e.charAt(v+1)],q=r?e.charAt(v+1):"_v","="==q?(v=j(e,v),p=l):(r&&v++,p=n),u=v):d(y,e,v)?(t.push({tag:q,n:c(s),otag:x,ctag:y,i:"/"==q?u-x.length:v+y.length}),s="",v+=y.length-1,p=l,"{"==q&&("}}"==y?v++:b(t[t.length-1]))):s+=e.charAt(v);return i(u,!0),t};var t={_t:!0,"\n":!0,$:!0,"/":!0};a.stringify=function(b,c,d){return"{code: function (c,p,i) { "+a.wrapMain(b.code)+" },"+i(b)+"}"};var u=0;a.generate=function(b,c,d){u=0;var e={code:"",subs:{},partials:{}};return a.walk(b,e),d.asString?this.stringify(e,c,d):this.makeTemplate(e,c,d)},a.wrapMain=function(a){return'var t=this;t.b(i=i||"");'+a+"return t.fl();"},a.template=a.Template,a.makeTemplate=function(a,b,c){var d=this.makePartials(a);return d.code=new Function("c","p","i",this.wrapMain(a.code)),new this.template(d,b,this,c)},a.makePartials=function(a){var b,c={subs:{},partials:a.partials,name:a.name};for(b in c.partials)c.partials[b]=this.makePartials(c.partials[b]);for(b in a.subs)c.subs[b]=new Function("c","p","t","i",a.subs[b]);return c},a.codegen={"#":function(b,c){c.code+="if(t.s(t."+k(b.n)+'("'+j(b.n)+'",c,p,1),c,p,0,'+b.i+","+b.end+',"'+b.otag+" "+b.ctag+'")){t.rs(c,p,function(c,p,t){',a.walk(b.nodes,c),c.code+="});c.pop();}"},"^":function(b,c){c.code+="if(!t.s(t."+k(b.n)+'("'+j(b.n)+'",c,p,1),c,p,1,0,0,"")){',a.walk(b.nodes,c),c.code+="};"},">":l,"<":function(b,c){var d={partials:{},code:"",subs:{},inPartial:!0};a.walk(b.nodes,d);var e=c.partials[l(b,c)];e.subs=d.subs,e.partials=d.partials},$:function(b,c){var d={subs:{},code:"",partials:c.partials,prefix:b.n};a.walk(b.nodes,d),c.subs[b.n]=d.code,c.inPartial||(c.code+='t.sub("'+j(b.n)+'",c,p,i);')},"\n":function(a,b){b.code+=n('"\\n"'+(a.last?"":" + i"))},_v:function(a,b){b.code+="t.b(t.v(t."+k(a.n)+'("'+j(a.n)+'",c,p,0)));'},_t:function(a,b){b.code+=n('"'+j(a.text)+'"')},"{":m,"&":m},a.walk=function(b,c){for(var d,e=0,f=b.length;f>e;e++)d=a.codegen[b[e].tag],d&&d(b[e],c);return c},a.parse=function(a,b,c){return c=c||{},e(a,"",[],c.sectionTags||[])},a.cache={},a.cacheKey=function(a,b){return[a,!!b.asString,!!b.disableLambda,b.delimiters,!!b.modelGet].join("||")},a.compile=function(b,c){c=c||{};var d=a.cacheKey(b,c),e=this.cache[d];if(e){var f=e.partials;for(var g in f)delete f[g].instance;return e}return e=this.generate(this.parse(this.scan(b,c.delimiters),b,c),b,c),this.cache[d]=e}}("undefined"!=typeof exports?exports:Hogan),function(a,b){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(c){return a.Bloodhound=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.Bloodhound=b(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c="0.11.1",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){return function(c){return c=b.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function c(a,c){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix)),this.ls=c||h,!this.ls&&this._noop()}function d(){return(new Date).getTime()}function e(a){return JSON.stringify(b.isUndefined(a)?null:a)}function f(b){return a.parseJSON(b)}function g(a){var b,c,d=[],e=h.length;for(b=0;e>b;b++)(c=h.key(b)).match(a)&&d.push(c.replace(a,""));return d}var h;try{h=window.localStorage,h.setItem("~~~","!"),h.removeItem("~~~")}catch(i){h=null}return b.mixin(c.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=b.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(c){"QuotaExceededError"===c.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),f(this.ls.getItem(this._prefix(a)))},set:function(a,c,f){return b.isNumber(f)?this._safeSet(this._ttlKey(a),e(d()+f)):this.ls.removeItem(this._ttlKey(a)),this._safeSet(this._prefix(a),e(c))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a,b=g(this.keyMatcher);for(a=b.length;a--;)this.remove(b[a]);return this},isExpired:function(a){var c=f(this.ls.getItem(this._ttlKey(a)));return b.isNumber(c)&&d()>c?!0:!1}}),c}(),g=function(){"use strict";function c(a){a=a||{},this.cancelled=!1,this.lastReq=null,this._send=a.transport,this._get=a.limiter?a.limiter(this._get):this._get,this._cache=a.cache===!1?new e(0):h}var d=0,f={},g=6,h=new e(10);return c.setMaxPendingRequests=function(a){g=a},c.resetCache=function(){h.reset()},b.mixin(c.prototype,{_fingerprint:function(b){return b=b||{},b.url+b.type+a.param(b.data||{})},_get:function(a,b){function c(a){b(null,a),k._cache.set(i,a)}function e(){b(!0)}function h(){d--,delete f[i],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var i,j,k=this;i=this._fingerprint(a),this.cancelled||i!==this.lastReq||((j=f[i])?j.done(c).fail(e):g>d?(d++,f[i]=this._send(a).done(c).fail(e).always(h)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,d){var e,f;d=d||a.noop,c=b.isString(c)?{url:c}:c||{},f=this._fingerprint(c),this.cancelled=!1,this.lastReq=f,(e=this._cache.get(f))?d(null,e):this._get(c,d)},cancel:function(){this.cancelled=!0}}),c}(),h=window.SearchIndex=function(){"use strict";function c(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.identify=c.identify||b.stringify,this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){var a={};return a[i]=[],a[h]={},a}function f(a){for(var b={},c=[],d=0,e=a.length;e>d;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){var c=0,d=0,e=[];a=a.sort(),b=b.sort();for(var f=a.length,g=b.length;f>c&&g>d;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}var h="c",i="i";return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;c.datums[f=c.identify(a)]=a,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b[h][g]||(b[h][g]=e()),b[i].push(f)})})},get:function(c){var d=this;return"all"==c[0]?a.map(d.datums,function(a){return a}):b.map(c,function(a){return d.datums[a]})},search:function(a){var c,e,j=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=j.trie,c=a.split("");b&&(d=c.shift());)b=b[h][d];return b&&0===c.length?(f=b[i].slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return j.datums[a]}):[]},all:function(){var a=[];for(var b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={},this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function a(a){this.url=a.url,this.ttl=a.ttl,this.cache=a.cache,this.prepare=a.prepare,this.transform=a.transform,this.transport=a.transport,this.thumbprint=a.thumbprint,this.storage=new f(a.cacheKey)}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(c.data,a,this.ttl),this.storage.set(c.protocol,location.protocol,this.ttl),this.storage.set(c.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b={};return this.cache?(b.data=this.storage.get(c.data),b.protocol=this.storage.get(c.protocol),b.thumbprint=this.storage.get(c.thumbprint),a=b.thumbprint!==this.thumbprint||b.protocol!==location.protocol,b.data&&!a?b.data:null):null},fromNetwork:function(a){function b(){a(!0)}function c(b){a(null,e.transform(b))}var d,e=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(c))},clear:function(){return this.storage.clear(),this}}),a}(),j=function(){"use strict";function a(a){this.url=a.url,this.prepare=a.prepare,this.transform=a.transform,this.transport=new g({cache:a.cache,limiter:a.limiter,transport:a.transport})}return b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:e.transform(c))}var d,e=this;if(b)return a=a||"",d=this.prepare(a,this._settings()),this.transport.get(d,c)},cancelLastRequest:function(){this.transport.cancel()}}),a}(),k=function(){"use strict";function d(d){var e;return d?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:b.identity,transform:b.identity,transport:null},d=b.isString(d)?{url:d}:d,d=b.mixin(e,d),!d.url&&a.error("prefetch requires url to be set"),d.transform=d.filter||d.transform,d.cacheKey=d.cacheKey||d.url,d.thumbprint=c+d.thumbprint,d.transport=d.transport?h(d.transport):a.ajax,d):null}function e(c){var d;if(c)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:b.identity,transport:null},c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),!c.url&&a.error("remote requires url to be set"),c.transform=c.filter||c.transform,c.prepare=f(c),c.limiter=g(c),c.transport=c.transport?h(c.transport):a.ajax,delete c.replace,delete c.wildcard,delete c.rateLimitBy,delete c.rateLimitWait,c}function f(a){function b(a,b){return b.url=f(b.url,a),b}function c(a,b){return b.url=b.url.replace(g,encodeURIComponent(a)),b}function d(a,b){return b}var e,f,g;return e=a.prepare,f=a.replace,g=a.wildcard,e?e:e=f?b:a.wildcard?c:d}function g(a){function c(a){return function(c){return b.debounce(c,a)}}function d(a){return function(c){return b.throttle(c,a)}}var e,f,g;return e=a.limiter,f=a.rateLimitBy,g=a.rateLimitWait,e||(e=/^throttle$/i.test(f)?d(g):c(g)),e}function h(c){return function(d){function e(a){b.defer(function(){g.resolve(a)})}function f(a){b.defer(function(){g.reject(a)})}var g=a.Deferred();return c(d,e,f),g}}return function(c){var f,g;return f={initialize:!0,identify:b.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},c=b.mixin(f,c||{}),!c.datumTokenizer&&a.error("datumTokenizer is required"),!c.queryTokenizer&&a.error("queryTokenizer is required"),g=c.sorter,c.sorter=g?function(a){return a.sort(g)}:b.identity,c.local=b.isFunction(c.local)?c.local():c.local,c.prefetch=d(c.prefetch),c.remote=e(c.remote),c}}(),l=function(){"use strict";function c(a){a=k(a),this.sorter=a.sorter,this.identify=a.identify,this.sufficient=a.sufficient,this.local=a.local,this.remote=a.remote?new j(a.remote):null,this.prefetch=a.prefetch?new i(a.prefetch):null,this.index=new h({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer}),a.initialize!==!1&&this.initialize()}var e;return e=window&&window.Bloodhound,c.noConflict=function(){return window&&(window.Bloodhound=e),c},c.tokenizers=d,b.mixin(c.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){return a?c.reject():(e.add(b),e.prefetch.store(e.index.serialize()),void c.resolve())}var c,d,e=this;return c=a.Deferred(),this.prefetch?(d=this.prefetch.fromCache())?(this.index.bootstrap(d),c.resolve()):this.prefetch.fromNetwork(b):c.resolve(),c.promise()},_initialize:function(){function a(){b.add(b.local)}var b=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(a),this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(a){return a=b.isArray(a)?a:[].slice.call(arguments),this.index.get(a)},search:function(a,c,d){function e(a){var c=[];b.each(a,function(a){!b.some(f,function(b){return g.identify(a)===g.identify(b)})&&c.push(a)}),d&&d(c)}var f,g=this;return f=this.sorter(this.index.search(a)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(a,e):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),c}();return l}),function(a,b){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c=function(){"use strict";function a(a){var g,h;return h=b.mixin({},f,a),g={css:e(),classes:h,html:c(h),selectors:d(h)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(a){b.mixin(a,g)}}}function c(a){return{wrapper:'<span class="'+a.wrapper+'"></span>',menu:'<div class="'+a.menu+'"></div>'}}function d(a){var c={};return b.each(a,function(a,b){c[b]="."+a}),c}function e(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a}var f={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-dropdown-menu",dataset:"tt-dataset",suggestions:'<span class="tt-suggestions"></span>',suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return a}(),d=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d,e;return d="typeahead:",e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},b.mixin(c.prototype,{_trigger:function(b,c){var e;return e=a.Event(d+b),(c=c||[]).unshift(e),this.$el.trigger.apply(this.$el,c),e},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1)),(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),c}(),e=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&f>e;e+=1)d=a[e].apply(b,c)===!1;return!d}return d}function g(){var a;return a=window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),f=function(a){"use strict";function c(a,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)f.push(b.escapeRegExChars(a[g]));return e=d?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")",
c?new RegExp(e):new RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,f;return(c=h.exec(b.data))&&(f=a.createElement(e.tagName),e.className&&(f.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(f,d)),!!c}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e),e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),g=function(){"use strict";function c(c,e){c=c||{},c.input||a.error("input is missing"),e.mixin(this),this.$hint=a(c.hint),this.$input=a(c.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function g(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var h;return h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return b.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(a){var b=h[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case"up":case"down":c=!g(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!g(b);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c,d;c=f(a,this.query),d=c?this.query.length!==a.length:!1,this.query=a,b||c?!b&&d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var a,c,d,e,f=this;return a=b.bind(this._onBlur,this),c=b.bind(this._onFocus,this),d=b.bind(this._onKeydown,this),e=b.bind(this._onInput,this),this.$input.on("blur.tt",a).on("focus.tt",c).on("keydown.tt",d),!b.isMsie()||b.isMsie()>9?this.$input.on("input.tt",e):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){h[a.which||a.keyCode]||b.defer(b.bind(f._onInput,f,a))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a),this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),d=""!==a&&c&&!this.hasOverflow(),!d&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=a("<div>")}}),c}(),h=function(){"use strict";function c(c,e){c=c||{},c.templates=c.templates||{},c.templates.notFound=c.templates.notFound||c.templates.empty,c.source||a.error("missing source"),c.node||a.error("missing node"),c.name&&!h(c.name)&&a.error("invalid dataset name: "+c.name),e.mixin(this),this.highlight=!!c.highlight,this.name=c.name||j(),this.limit=c.limit||5,this.displayFn=d(c.display||c.displayKey),this.templates=g(c.templates,this.displayFn),this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source,this.async=b.isUndefined(c.async)?this.source.length>2:!!c.async,this._resetLastSuggestion(),this.$el=a(c.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function d(a){function c(b){return b[a]}return a=a||b.stringify,b.isFunction(a)?a:c}function g(c,d){function e(b){return a("<div>").text(d(b))}return{notFound:c.notFound&&b.templatify(c.notFound),pending:c.pending&&b.templatify(c.pending),header:c.header&&b.templatify(c.header),footer:c.footer&&b.templatify(c.footer),suggestion:c.suggestion||e}}function h(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var i,j;return i={val:"tt-selectable-display",obj:"tt-selectable-object"},j=b.getIdGenerator(),c.extractData=function(b){var c=a(b);return c.data(i.obj)?{val:c.data(i.val)||"",obj:c.data(i.obj)||null}:null},b.mixin(c.prototype,e,{_overwrite:function(a,b){b=b||[],b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty(),this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[],b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a),this.trigger("rendered",this.name,b,!0)},_renderSuggestions:function(b,c){var d;d=this._getSuggestionsFragment(b,c),this.$lastSuggestion=d.children().last();var e=a(this.classes.suggestions).css("display","block");e=e.html(d),this.$el.html(e).prepend(this._getHeader(b,c)).append(this._getFooter(b,c))},_appendSuggestions:function(a,b){var c,d;c=this._getSuggestionsFragment(a,b),d=c.children().last(),this.$lastSuggestion.after(c),this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,g=this;return e=document.createDocumentFragment(),b.each(d,function(b){var d,f;f=g._injectQuery(c,b),d=a(g.templates.suggestion(f)).data(i.obj,b).data(i.val,g.displayFn(b)).addClass(g.classes.suggestion+" "+g.classes.selectable),e.appendChild(d[0])}),this.highlight&&f({className:this.classes.highlight,node:e,pattern:c}),a(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,c){return b.isObject(c)?b.mixin({_query:a},c):c},update:function(b){function c(a){g||(g=!0,a=(a||[]).slice(0,e.limit),h=a.length,e._overwrite(b,a),h<e.limit&&e.async&&e.trigger("asyncRequested",b))}function d(c){c=c||[],!f&&h<e.limit&&(e.cancel=a.noop,h+=c.length,e._append(b,c.slice(0,e.limit-h)),e.async&&e.trigger("asyncReceived",b))}var e=this,f=!1,g=!1,h=0;this.cancel(),this.cancel=function(){f=!0,e.cancel=a.noop,e.async&&e.trigger("asyncCanceled",b)},this.source(b,c,d),!g&&c([])},cancel:a.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}}),c}(),i=function(){"use strict";function c(c,d){function e(b){var c=f.$node.find(b.node).first();return b.node=c.length?c:a("<div>").appendTo(f.$node),new h(b,d)}var f=this;c=c||{},c.node||a.error("node is required"),d.mixin(this),this.$node=a(c.node),this.$input=a(c.input),this.query=null,this.datasets=b.map(c.datasets,e)}return b.mixin(c.prototype,e,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.find(".item-suggest").length>0?this.$node.removeClass("tt-empty"):this.$node.addClass("tt-empty"),this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function a(a){return a.isEmpty()}return b.every(this.datasets,a)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>b?this.$node.scrollTop(d+b):c>e&&this.$node.scrollTop(d+(c-e))},bind:function(){var a,c=this;return a=b.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,a),b.each(this.datasets,function(a){a.onSync("asyncRequested",c._propagate,c).onSync("asyncCanceled",c._propagate,c).onSync("asyncReceived",c._propagate,c).onSync("rendered",c._onRendered,c).onSync("cleared",c._onCleared,c)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,c,d,e;return c=this.getActiveSelectable(),b=this._getSelectables(),d=c?b.index(c):-1,e=d+a,e=(e+1)%(b.length+1)-1,e=-1>e?b.length-1:e,-1===e?null:b.eq(e)},setCursor:function(a){this._removeCursor(),(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function c(b){b.update(a)}var d=a!==this.query;return d&&(this.query=a,b.each(this.datasets,c)),d},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.query=null},destroy:function(){function c(a){a.destroy()}this.$node.off(".tt"),this.$node=a("<div>"),b.each(this.datasets,c)}}),c}(),j=function(){"use strict";function a(){i.apply(this,[].slice.call(arguments,0))}var c=i.prototype;return b.mixin(a.prototype,i.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),c.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),c.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),c.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide(),this.$input.removeClass("active-dropdown")},_show:function(){this.$node.css("display","block"),this.$input.addClass("active-dropdown")}}),a}(),k=function(){"use strict";function c(c,e){var f,g,h,i,j,k,l,m,n,o,p;c=c||{},c.input||a.error("missing input"),c.menu||a.error("missing menu"),c.eventBus||a.error("missing event bus"),e.mixin(this),this.eventBus=c.eventBus,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),f=d(this,"activate","open","_onFocused"),g=d(this,"deactivate","_onBlurred"),h=d(this,"isActive","isOpen","_onEnterKeyed"),i=d(this,"isActive","isOpen","_onTabKeyed"),j=d(this,"isActive","_onEscKeyed"),k=d(this,"isActive","open","_onUpKeyed"),l=d(this,"isActive","open","_onDownKeyed"),m=d(this,"isActive","isOpen","_onLeftKeyed"),n=d(this,"isActive","isOpen","_onRightKeyed"),o=d(this,"_openIfActive","_onQueryChanged"),p=d(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",i,this).onSync("escKeyed",j,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",m,this).onSync("rightKeyed",n,this).onSync("queryChanged",o,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);b.each(c,function(b){return a[b].apply(a,d)})}}return b.mixin(c.prototype,{_hacks:function(){var c,d;c=this.input.$input||a("<div>"),d=this.menu.$node||a("<div>"),c.on("blur.tt",function(a){var e,f,g;e=document.activeElement,f=d.is(e),g=d.has(e).length>0,b.isMsie()&&(f||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){c.focus()}))}),d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){this._updateHint(),this.eventBus.trigger("render",c,d,b)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&b.preventDefault()},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){return a=b.isString(a)?a:this.input.getQuery()||"",a.length>=this.minLength},_updateHint:function(){var a,c,d,e,f,h,i;a=this.menu.getTopSelectable(),c=this.menu.getSelectableData(a),d=this.input.getInputValue(),!c||b.isBlankString(d)||this.input.hasOverflow()?this.input.clearHint():(e=g.normalizeQuery(d),f=b.escapeRegExChars(e),h=new RegExp("^(?:"+f+")(.+$)","i"),i=h.exec(c.val),i&&this.input.setHint(d+i[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(a){this.input.setQuery(b.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){var b=this.menu.getSelectableData(a);return b&&!this.eventBus.before("select",b.obj)?(this.input.setQuery(b.val,!0),this.eventBus.trigger("select",b.obj),this.close(),!0):!1},autocomplete:function(a){var b,c,d;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),d=c&&b!==c.val,d&&!this.eventBus.before("autocomplete",c.obj)?(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj),!0):!1},moveCursor:function(a){var b,c,d,e,f;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),d=this.menu.getSelectableData(c),e=d?d.obj:null,f=this._minLengthMet()&&this.menu.update(b),f||this.eventBus.before("cursorchange",e)?!1:(this.menu.setCursor(c),d?this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),c}();!function(){"use strict";function e(b,c){b.each(function(){var b,d=a(this);(b=d.data(p.typeahead))&&c(b,d)})}function f(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(l(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function h(a,b){a.data(p.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass(b.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(c){}return a}function l(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function m(a){var c,d;c=a.data(p.www),d=a.parent().filter(c.selectors.wrapper),b.each(a.data(p.attrs),function(c,d){b.isUndefined(c)?a.removeAttr(d):a.attr(d,c)}),a.removeData(p.typeahead).removeData(p.www).removeData(p.attr).removeClass(c.classes.input),d.length&&(a.detach().insertAfter(d),d.remove())}function n(c){var d,e;return d=b.isJQuery(c)||b.isElement(c),e=d?a(c).first():[],e.length?e:null}var o,p,q;o=a.fn.typeahead,p={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},q={initialize:function(e,l){function m(){var c,m,q,r,s,t,u,v,w,x,y;b.each(l,function(a){a.highlight=!!e.highlight}),c=a(this),m=a(o.html.wrapper),q=n(e.hint),r=n(e.menu),s=e.hint!==!1&&!q,t=e.menu!==!1&&!r,s&&(q=f(c,o)),t&&(r=a(o.html.menu).css(o.css.menu)),q&&q.val(""),c=h(c,o),(s||t)&&(m.css(o.css.wrapper),c.css(s?o.css.input:o.css.inputWithNoHint),c.wrap(m).parent().prepend(s?q:null).append(t?r:null)),y=t?j:i,u=new d({el:c}),v=new g({hint:q,input:c},o),w=new y({node:r,input:c,datasets:l},o),x=new k({input:v,menu:w,eventBus:u,minLength:e.minLength},o),c.data(p.www,o),c.data(p.typeahead,x)}var o;return l=b.isArray(l)?l:[].slice.call(arguments,1),e=e||{},o=c(e.classNames),this.each(m)},isEnabled:function(){var a;return e(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return e(this,function(a){a.enable()}),this},disable:function(){return e(this,function(a){a.disable()}),this},isActive:function(){var a;return e(this.first(),function(b){a=b.isActive()}),a},activate:function(){return e(this,function(a){a.activate()}),this},deactivate:function(){return e(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return e(this.first(),function(b){a=b.isOpen()}),a},open:function(){return e(this,function(a){a.open()}),this},close:function(){return e(this,function(a){a.close()}),this},select:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return e(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var b;return arguments.length?(e(this,function(b){b.setVal(a)}),this):(e(this.first(),function(a){b=a.getVal()}),b)},destroy:function(){return e(this,function(a,b){m(b),a.destroy()}),this}},a.fn.typeahead=function(a){return q[a]?q[a].apply(this,[].slice.call(arguments,1)):q.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=o,this}}()}),function(a){function b(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function c(a,b){this.x=Math.round(parseFloat(a)),this.y=Math.round(parseFloat(b))}function d(a,b){this.width=Math.round(parseFloat(a)),this.height=Math.round(parseFloat(b))}function e(a,b,c){c="undefined"!=typeof c?c:1,this.x=parseFloat(a),this.y=parseFloat(b),this.z=parseFloat(c)}function f(b,c){var d=a(b).data(g);if(d)return d;switch(this.settings=a.extend({},f.defaultSettings,c),this.$target=a(b),this.$target.tagName()){case"img":this.mode="image",this.imageUrl=this.$target.attr("src");break;case"svg":this.mode="svg",this.imageUrl=null;break;default:this.mode="container",this.imageUrl=this.settings.imageUrl}this._init(),this.$target.data(g,this),"container"==this.mode&&this.$image.data(g,this)}var g="__apiz__",h="apiz-",i="apiz",j="apiz";String.prototype.ucfirst||(String.prototype.ucfirst=function(){return b(this)}),jQuery.fn.tagName=function(){return this.prop("tagName").toLowerCase()},f.prototype={_init:function(){var b=this;this.loading=!0,this.dragging=!1,this.pinching=!1,this.preventClickBecauseOfDragging=!1,this.preventClickForDoubleClick=!1,this._addWrapper(),this._updateCssClasses(),"svg"==this.mode||this.imageUrl?"svg"==this.mode?(this._buildSvgAndAddReference(),this._obtainNaturalImageSize(),this._setup(),this.$wrapper.removeClass(h+"loading")):(this.$image=a("<img />"),this.$image.hide().prependTo(this.$wrapper).load(function(){b._obtainNaturalImageSize(),b._setup(),b.$wrapper.removeClass(h+"loading")}).error(function(){b.loading=!1,b.$wrapper.removeClass(h+"loading"),b._showError("Error loading image!"),b.disable()}).attr("src",this.imageUrl)):(this.loading=!1,this._showError("Invalid image url!"),this.disable())},_addWrapper:function(){this.$wrapper=a("<div></div>").addClass(h+"wrapper").addClass(h+"mode-"+this.mode).addClass(h+"loading"),this.$overlay=a("<div></div>").addClass(h+"overlay").appendTo(this.$wrapper),"svg"!=this.mode&&this._addLoadingAnimation(),"image"==this.mode?(this.imageIsVisible=this.$target.is(":visible"),this.$target.hide().after(this.$wrapper).appendTo(this.$wrapper)):"svg"==this.mode?this.$target.after(this.$wrapper).appendTo(this.$wrapper):this.$wrapper.appendTo(this.$target)},_removeWrapper:function(){"image"==this.mode&&this.imageIsVisible&&this.$target.show(),("image"==this.mode||"svg"==this.mode)&&this.$wrapper.after(this.$target),this.$wrapper.remove()},_updateCssClasses:function(){"string"!=typeof this.settings.cssWrapperClass||this.$wrapper.hasClass(this.settings.cssWrapperClass)||this.$wrapper.addClass(this.settings.cssWrapperClass);var a={hammer:{status:this.settings.hammerPluginEnabled,enabled:"hammer-enabled",disabled:"hammer-disabled"},mouseWheel:{status:this.settings.mouseWheelPluginEnabled,enabled:"mouse-wheel-enabled",disabled:"mouse-wheel-disabled"},enabled:{status:!this.settings.disabled,enabled:"enabled",disabled:"disabled"},enableDragging:{status:this.settings.dragEnabled,enabled:"drag-enabled",disabled:"drag-disabled"},enableZooming:{status:this.settings.zoomEnabled,enabled:"zoom-enabled",disabled:"zoom-disabled"}};for(key in a){var b=a[key];this.$wrapper.removeClass(h+(b.status?b.disabled:b.enabled)).addClass(h+(b.status?b.enabled:b.disabled))}},_addLoadingAnimation:function(){var b;switch(this.settings.loadingAnimation){case"text":b=a("<div></div>").addClass(h+"loading-animation-text"),b.html(this.settings.loadingAnimationData);break;case"throbber":b=a("<div></div>").addClass(h+"throbber");var c=["one","two","three"];for(index in c)b.append(a("<div></div>").addClass(h+"circle "+h+"circle-"+c[index]));break;case"image":b=a("<div></div>").addClass(h+"loading-animation-image"),b.css("background-image","url('"+this.settings.loadingAnimationData+"')")}this._triggerHandler("beforeShowLoadingAnimation",[b])!==!1&&(this.$loadingAnimation=b,this.$wrapper.append(b).addClass(h+"loading-animation"),this._trigger("showLoadingAnimation"))},_removeLoadingAnimation:function(){var b=this;this.$loadingAnimation&&("number"==typeof this.settings.loadingAnimationFadeOutDuration?this.$loadingAnimation.fadeOut(this.settings.loadingAnimationFadeOutDuration,function(){a(this).remove(),b.$wrapper.removeClass(h+"loading-animation"),b._trigger("hideLoadingAnimation")}):(this.$loadingAnimation.remove(),this.$wrapper.removeClass(h+"loading-animation"),this._trigger("hideLoadingAnimation")),this.$loadingAnimation=void 0)},_buildSvgAndAddReference:function(){this._addClassToOriginalSvg();var b=this.$wrapper[0],c="#"+this.$target.attr("id"),d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),d.setAttribute("version","1.1"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),b.insertBefore(d,b.firstChild);var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("version","1.1"),e.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width",this.$target.width()),e.setAttribute("height",this.$target.height()),e.setAttribute("style","overflow: visible"),d.appendChild(e);var f=document.createElementNS("http://www.w3.org/2000/svg","use");f.setAttribute("x","0"),f.setAttribute("y","0"),f.setAttribute("width",this.$target.width()),f.setAttribute("height",this.$target.height()),f.setAttributeNS("http://www.w3.org/1999/xlink","href",c),e.appendChild(f),this.$image=a(d),this.$svgUse=a(f)},_addClassToOriginalSvg:function(){var a=this.$target[0],b=h+"original-svg",c=a.getAttribute("class");c&&-1!=c.indexOf(b)||(c=(c?c+" ":"")+b,a.setAttribute("class",c))},_removeClassFromOriginalSvg:function(){var a=this.$target[0],b=h+"original-svg",c=a.getAttribute("class");if(c&&c.indexOf(b)>-1){var d="[ ]?"+b;c=c.replace(new RegExp(d),""),a.setAttribute("class",c)}},_obtainNaturalImageSize:function(){"svg"==this.mode?this.naturalSize=new d(this.$target.width(),this.$target.height()):this.naturalSize=new d(this.$image.width(),this.$image.height())},_setup:function(){this.currentPosition=new c(-1*this.naturalSize.width/2,-1*this.naturalSize.height/2),this.currentSize=new d(this.naturalSize.width,this.naturalSize.height),this.currentZoom=this._getValidZoom(1),this._resetZoom(),this._center(),this._bind(),this.loading=!1,this._removeLoadingAnimation(),"number"==typeof this.settings.loadingAnimationFadeOutDuration?this.$image.fadeIn(this.settings.loadingAnimationFadeOutDuration):this.$image.show(),this._trigger("init")},_bind:function(){var b=this;this.settings.hammerPluginEnabled&&"function"==typeof Hammer?(this.hammerManager=new Hammer.Manager(this.$overlay[0]),this.hammerManager.add(new Hammer.Pan({threshold:0,pointers:0})),this.hammerManager.add(new Hammer.Pinch({threshold:0})).recognizeWith(this.hammerManager.get("pan")),this.hammerManager.add(new Hammer.Swipe).recognizeWith(this.hammerManager.get("pan")),this.hammerManager.add(new Hammer.Tap({event:"doubletap",taps:2,threshold:15,posThreshold:100})).recognizeWith(this.hammerManager.get("pan")),this.hammerManager.add(new Hammer.Tap),this.hammerManager.on("panstart panmove panend",function(a){b._onDrag(a)}),this.hammerManager.on("pinchstart pinchmove pinchend",function(a){b._onPinch(a)}),this.hammerManager.on("swipe",function(a){b._onSwipe(a)}),this.hammerManager.on("tap",function(a){b._onClick(a)}),this.hammerManager.on("doubletap",function(a){b._onDoubleClick(a)})):(this.$overlay.on("mousedown."+i,function(a){b._onDrag(a)}),a(document).on("mouseup."+i,function(a){b._onDrag(a)}),a(document).on("mousemove."+i,function(a){b._onDrag(a)}),this.$overlay.on("click."+i,function(a){b._onClick(a)}),this.$overlay.on("dblclick."+i,function(a){b._onDoubleClick(a)})),this.settings.mouseWheelPluginEnabled&&"function"==typeof jQuery.fn.mousewheel&&this.$overlay.mousewheel(function(a,c){return b._onMouseWheel(a),!1})},_unbind:function(){this.hammerManager?(this.hammerManager.stop(!0),this.hammerManager.destroy(),this._isDragging(!1),this._isPinching(!1)):(this.$overlay.off("mousedown."+i),a(document).off("mouseup."+i),a(document).off("mousemove."+i)),this.$overlay.off("mousewheel."+i)},_onDrag:function(a){if(!this.settings.disabled&&this.settings.dragEnabled){if("panstart"==a.type||"mousedown"==a.type)this._isDragging(!0),this.dragParams={imagePosition:this.currentPosition,cursorPosition:new c("panstart"==a.type?a.pointers[0].screenX:a.screenX,"panstart"==a.type?a.pointers[0].screenY:a.screenY)},"mousedown"==a.type&&(this.preventClickBecauseOfDragging=!1),this._trigger("dragStart",[this.currentPosition]);else if("panend"==a.type||"mouseup"==a.type)this._isDragging(!1),this._trigger("dragEnd",[this.currentPosition]);else if("panmove"==a.type||"mousemove"==a.type&&this._isDragging()){"mousemove"==a.type&&(this.preventClickBecauseOfDragging=!0);var b=new c(this.dragParams.imagePosition.x+("panmove"==a.type?a.pointers[0].screenX:a.screenX)-this.dragParams.cursorPosition.x,this.dragParams.imagePosition.y+("panmove"==a.type?a.pointers[0].screenY:a.screenY)-this.dragParams.cursorPosition.y);this._move(b),this._trigger("dragMove",[this.currentPosition])}a.preventDefault()}},_isDragging:function(a){return a!==!0&&a!==!1||this.dragging===a?this.dragging:(this.dragging=a,void this.$wrapper.toggleClass(h+"dragging"))},_onPinch:function(a){if(!this.settings.disabled&&this.settings.zoomEnabled){if("pinchstart"==a.type){this._isPinching(!0);var b=new c(a.pointers[0].pageX||0,a.pointers[0].pageY||0),d=new c(a.pointers[1].pageX||0,a.pointers[1].pageY||0),e=new c((b.x+d.x)/2,(b.y+d.y)/2),f=this._getPointerOrigin({pageX:e.x,pageY:e.y});this.pinchParams={zoom:this.currentZoom,imageSize:this.currentSize,imagePosition:this.currentPosition,relativeOrigin:f},this._trigger("pinchStart",[this.currentZoom,this.currentSize,this.currentPosition])}else if("pinchend"==a.type)this._isPinching(!1),this._trigger("pinchEnd",[this.currentZoom,this.currentSize,this.currentPosition]);else{var g=this.pinchParams.zoom*a.scale;this._zoomTo(g);var h=this.currentSize.width-this.pinchParams.imageSize.width,i=this.currentSize.height-this.pinchParams.imageSize.height,j=new c(this.pinchParams.imagePosition.x-h*this.pinchParams.relativeOrigin.x,this.pinchParams.imagePosition.y-i*this.pinchParams.relativeOrigin.y);
this._move(j),this._trigger("pinchMove",[this.currentZoom,this.currentSize,this.currentPosition])}a.preventDefault()}},_isPinching:function(a){return a!==!0&&a!==!1||this.pinching===a?this.pinching:(this.pinching=a,void this.$wrapper.toggleClass(h+"pinching"))},_onSwipe:function(a){if(!this.settings.disabled){var b;switch(a.direction){case 8:b="swipeTop";break;case 4:b="swipeRight";break;case 16:b="swipeBottom";break;case 2:b="swipeLeft"}b&&(this._handleAction(this.settings[b],a),this._trigger(b,[a]),a.preventDefault())}},_onClick:function(a){if(!(this.settings.disabled||this.preventClickBecauseOfDragging||this.preventClickForDoubleClick)){if("click"==a.type){var b=this;this.preventClickForDoubleClick=!0,this.preventClickTimeout=setTimeout(function(){b.preventClickForDoubleClick=!1,b.preventClickTimeout=void 0},500)}var c=this._getPointerOrigin(a);this._handleAction(this.settings.click,a,{origin:c}),this._trigger("click",[a]),a.preventDefault()}},_onDoubleClick:function(a){if(!this.settings.disabled){"dblclick"==a.type&&this.preventClickTimeout&&(this.preventClickForDoubleClick=!1,clearTimeout(this.preventClickTimeout),this.preventClickTimeout=void 0);var b=this._getPointerOrigin(a);this._handleAction(this.settings.doubleClick,a,{origin:b}),this._trigger("doubleClick",[a]),a.preventDefault()}},_onMouseWheel:function(a){if(!this.settings.disabled&&this.settings.zoomEnabled&&!this._isDragging()){var b=this.currentZoom+this.settings.zoomStep*a.deltaY,c=this._getPointerOrigin(a);this._zoomTo(b,c),this._trigger("mouseWheel",[this.currentZoom,this.currentSize,this.currentPosition]),a.preventDefault()}},_getPointerOrigin:function(a){var b={x:0,y:0};"svg"==this.mode&&(b=this.$svgUse.data("position"));var c=new e(((a.pointers?a.pointers[0].pageX:a.pageX)-this.$image.offset().left-b.x)/this.currentSize.width,((a.pointers?a.pointers[0].pageY:a.pageY)-this.$image.offset().top-b.y)/this.currentSize.height);return c},_handleAction:function(a,b,c){if("function"==typeof a)a.apply(this.$target,b);else switch(c="object"==typeof c?c:{},a){case"open":window.open(this.imageUrl);break;case"zoomIn":this.zoomIn(c.step,c.origin);break;case"zoomOut":this.zoomOut(c.step,c.origin);break;case"zoomMin":this.zoomMin(c.origin);break;case"zoomMax":this.zoomMax(c.origin);break;case"zoomToggle":this.zoomToggle(c.origin);break;case"reset":this.reset();break;case"center":this.center(c.dimension)}},_getOverlaySize:function(){return new d(this.$overlay.width(),this.$overlay.height())},_zoomTo:function(a,b){if(this.settings.disabled||!this.settings.zoomEnabled)return!1;var e=(this.currentZoom,this.currentPosition),f=this.currentSize;(a=this._getValidZoom(a))>=0&&(this.currentZoom=a,this.currentSize=new d(this.naturalSize.width*this.currentZoom,this.naturalSize.height*this.currentZoom),this.currentPosition=this._getValidPosition(new c(e.x-(this.currentSize.width-f.width)*(b?b.x:.5),e.y-(this.currentSize.height-f.height)*(b?b.y:.5))),this._updateSizeAndPosition())},_getValidZoom:function(a,b){var a=this._parseZoom(a),c=this._parseZoom(this.settings.minZoom),d=this._parseZoom(this.settings.maxZoom);return a!==!1?(c!==!1&&(a=Math.max(a,c)),d!==!1&&(a=Math.min(a,d))):a=-1,a},_parseZoom:function(a,b){if("number"==typeof a)return a;if("string"==typeof a){var c=a.indexOf("%");if(c>0&&c==a.length-1)return a=a.substr(0,c)/100;if("contain"==a||"cover"==a){var d=this._getOverlaySize(),e=d.width/this.naturalSize.width,f=d.height/this.naturalSize.height;return a="contain"==a?Math.min(e,f):Math.max(e,f)}}return b?b:!1},_resetZoom:function(){var a;if("number"==typeof this.settings.initialZoom||this.settings.initialZoom==parseFloat(this.settings.initialZoom))a=parseFloat(this.settings.initialZoom);else if("string"==typeof this.settings.initialZoom)switch(this.settings.initialZoom){case"auto":case"contain":a=this._getValidZoom("contain");break;case"cover":a=this._getValidZoom("cover");break;case"min":a=this._parseZoom(this.settings.minZoom);break;case"max":a=this._parseZoom(this.settings.maxZoom);break;default:a=this._getValidZoom(this.settings.initialZoom)}a&&(this._zoomTo(a),this._trigger("resetZoom",[this.currentZoom,this.currentSize]))},_move:function(a){var b=this._getValidPosition(a);return this._triggerHandler("beforePositionChange",[b])===!1?!1:(this.currentPosition=b,this._updateSizeAndPosition(),this._trigger("positionChanged",[this.currentPosition]),!0)},_getValidPosition:function(b){var d,e,f=this._getOverlaySize();return d=this.currentSize.width<=f.width?a.inArray(this.settings.autoCenter,[!0,"both","x","h","horizontal"])>-1?-1*this.currentSize.width/2:Math.min(Math.max(0-f.width/2,b.x),f.width/2-this.currentSize.width):Math.max(Math.min(0-f.width/2,b.x),f.width/2-this.currentSize.width),d=Math.round(d),e=this.currentSize.height<=f.height?a.inArray(this.settings.autoCenter,[!0,"both","y","v","vertical"])>-1?-1*this.currentSize.height/2:Math.min(Math.max(0-f.height/2,b.y),f.height/2-this.currentSize.height):Math.max(Math.min(0-f.height/2,b.y),f.height/2-this.currentSize.height),e=Math.round(e),new c(d,e)},_center:function(a){var b=new c(this.currentPosition.x,this.currentPosition.y);switch(a){case"x":case"h":case"horizontal":b.x=-1*this.currentSize.width/2;break;case"y":case"v":case"vertical":b.y=-1*this.currentSize.height/2;break;default:b=new c(-1*this.currentSize.width/2,-1*this.currentSize.height/2)}this._move(b),this._trigger("center",[this.currentPosition])},_updateSizeAndPosition:function(){if("svg"==this.mode){var b=Math.floor(this.currentPosition.x+Math.round(this.$image.width())/2),d=Math.floor(this.currentPosition.y+Math.round(this.$image.height())/2);use=this.$svgUse[0],use.setAttribute("transform","matrix("+this.currentZoom+" 0 0 "+this.currentZoom+" "+b+" "+d+")"),a(use).data({position:new c(b,d)})}else if(this.settings.hardwareAcceleration){var e="matrix3d("+this.currentZoom+", 0, 0, 0, 0, "+this.currentZoom+", 0, 0, 0, 0, "+this.currentZoom+", 0, "+this.currentPosition.x+", "+this.currentPosition.y+", 0, 1)";this.$image.css({"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e,transform:e})}else{var f=Math.round(this.naturalSize.width*this.currentZoom)+"px",g=Math.round(this.naturalSize.height*this.currentZoom)+"px",h=this.currentPosition.x+"px",i=this.currentPosition.y+"px";this.$image.css({width:f,height:g,marginLeft:h,marginTop:i})}},_trigger:function(a,b,c){var d="on"+a.ucfirst(),e=this.settings[d];c=c?c:this.$target,"function"==typeof e&&e.apply(c,b),a=j+a.ucfirst(),c.trigger(a,b)},_triggerHandler:function(a,b,c){var d,e="on"+a.ucfirst(),f=this.settings[e],g=void 0;return c=c?c:this.$target,"function"==typeof f&&(g=f.apply(c,b)),a=j+a.ucfirst(),d=void 0!==(d=c.triggerHandler(a,b))?d:g},_showError:function(b){this.$errorMessage||(this.$errorMessage=a("<div></div>").addClass(h+"error-message"),this.$wrapper.append(this.$errorMessage)),this.$loadingAnimation&&this.$loadingAnimation.remove(),this.$wrapper.addClass(h+"error"),this.$errorMessage.html(b),this._trigger("error",b)},enable:function(){this.loading||(this.settings.disabled=!1,this._updateCssClasses())},disable:function(){this.loading||(this.settings.disabled=!0,this._updateCssClasses(),this.hammerManager&&(this.hammerManager.stop(!0),this._isDragging(!1),this._isPinching(!1)))},isDisable:function(){return this.loading?void 0:this.settings.disabled},isDragging:function(){return this.loading?void 0:this._isDragging()},isPinching:function(){return this.loading?void 0:this._isPinching()},isLoading:function(){return this.loading},size:function(){return this.loading?void 0:this.currentSize},position:function(){return this.loading?void 0:this.currentPosition},reset:function(){this.loading||(this._resetZoom(),this._center())},resetSize:function(){this.loading||this._resetZoom()},center:function(a){this.loading||this._center(a)},zoom:function(a,b){return this.loading?void 0:(a&&this._zoomTo(a,b),a=Math.round(1e5*this.currentZoom)/1e5)},zoomIn:function(a,b){if(!this.loading){var c=this.currentZoom+(a?a:this.settings.zoomStep);this._zoomTo(c,b)}},zoomOut:function(a,b){if(!this.loading){var c=this.currentZoom-(a?a:this.settings.zoomStep);this._zoomTo(c,b)}},zoomMin:function(a){this.loading||this._zoomTo(this.settings.minZoom,a)},zoomMax:function(a){this.loading||this._zoomTo(this.settings.maxZoom,a)},zoomToggle:function(a){this.loading||(this.isMaxZoomed()?(this._resetZoom(),this._center()):this._zoomTo(this.settings.maxZoom,a))},isMinZoomed:function(){if(this.loading)return void 0;var a=this._parseZoom(this.settings.minZoom);return"number"==typeof a?Math.abs(this.currentZoom-a)<1e-5:!1},isMaxZoomed:function(){if(this.loading)return void 0;var a=this._parseZoom(this.settings.maxZoom);return"number"==typeof a?Math.abs(a-this.currentZoom)<1e-5:!1},option:function(b,c){if(!b)return a.extend({},this.settings);if(!this.loading){var d;if("string"==typeof b){if(1===arguments.length)return void 0!==this.settings[b]?this.settings[b]:null;d={},d[b]=c}else d=b;this._setOptions(d)}},_setOptions:function(b){for(key in b){var c=b[key];switch(key){case"hammerPluginEnabled":case"mouseWheelPluginEnabled":this._unbind();break;case"disabled":case"dragEnabled":case"zoomEnabled":this.hammerManager&&this.hammerManager.stop(!0),this._isDragging(!1),this._isPinching(!1);break;case"cssWrapperClass":this.$wrapper.removeClass(this.settings.cssWrapperClass);break;case"hardwareAcceleration":this.$image.css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"",transform:"",width:"",height:"",marginLeft:"",marginTop:""})}switch(this.settings[key]=c,key){case"hammerPluginEnabled":case"mouseWheelPluginEnabled":this._bind();break;case"hardwareAcceleration":this._updateSizeAndPosition();break;case"minZoom":case"maxZoom":this._zoomTo(this.currentZoom);break;case"autoCenter":switch(c){case!0:case"both":this._center();break;case"x":case"h":case"horizontal":case"y":case"v":case"vertical":this._center(c)}}a.inArray(key,["cssWrapperClass","hammerPluginEnabled","mouseWheelPluginEnabled","disabled","dragEnabled","zoomEnabled"])>-1&&this._updateCssClasses()}},destroy:function(){this.loading||(this._trigger("destroy"),this._unbind(),this._removeWrapper(),this._isDragging(!1),this._isPinching(!1),"svg"==this.mode&&this._removeClassFromOriginalSvg(),this.$target.removeData(g),"container"==this.mode&&this.$image.removeData(g))}},a.fn.apImageZoom=function(b){if("string"==typeof b){var c,d,e=[],h=Array.prototype.slice.call(arguments,1);return this.each(function(){if(c=a(this).data(g)){if("function"==typeof(d=c[b])&&"_"!==b.charAt(0)){var f=d.apply(c,h);void 0!==f&&e.push(f)}}else e.push(void 0)}),e.length?1===e.length?e[0]:e:this}return this.each(function(){new f(this,b)})},f.defaultSettings={imageUrl:void 0,loadingAnimation:void 0,loadingAnimationData:void 0,loadingAnimationFadeOutDuration:200,cssWrapperClass:void 0,initialZoom:"auto",minZoom:.2,maxZoom:1,zoomStep:.07,autoCenter:!0,hammerPluginEnabled:!0,mouseWheelPluginEnabled:!0,hardwareAcceleration:!0,disabled:!1,dragEnabled:!0,zoomEnabled:!0,doubleClick:"zoomToggle"}}(jQuery),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");var modal=function(a,b,c){var d={_body:c("body"),_d:c(b),modal:c(".modal"),modalTrigger:c(".modal-trigger"),modalQuickView:c("#modal-quick-view",a.parent.document),speed:200,close:c(".close-modal")};return{init:function(){var e=this;if(e.handleCookiePolicy(),c(b).keyup(function(a){27==a.keyCode&&(d.modal.fadeOut(d.speed),overlay.hide(),d._body.removeClass("noscroll"),
d.modalQuickView.removeClass("modal-inside"))}),a.location.hash){var f=c(a.location.hash);f.hasClass("modal")>0&&e.show(f)}d.close.on("click",function(a){a.preventDefault();var b=c(this);c("#"+b.data("target")).fadeOut(d.speed),overlay.hide(),d.modalQuickView.removeClass("modal-inside"),b.hasClass("quick-view")&&b.closest(".modal").find("iframe").remove(),d._body.removeClass("noscroll")}),d._d.on("click",".modal-trigger",function(a){a.preventDefault();var b=c(this),e=c("#"+b.data("target"));e.fadeIn();var f=e.find("input:visible:first");""==f.val()&&f.focus(),overlay.show(),d._body.addClass("noscroll")}),d._d.on("cart.items.created",function(a,b){d.modalQuickView.addClass("modal-inside")})},show:function(a){"modal-reviews"==a.attr("id")&&c('a[href="#reviews"]').trigger("click"),a.fadeIn(d.speed),overlay.show(),d._body.addClass("noscroll")},hide:function(a){a.fadeOut(d.speed),overlay.hide(),d.modalQuickView.removeClass("modal-inside"),d._body.removeClass("noscroll")},handleCookiePolicy:function(){var a={cookiePolicy:c(".box-cookies-policy"),closeCookiePolicy:c(".js-close-cookies-policy"),name:"newsCookiePolicy",time:700,daysExpire:365};c.cookie(a.name)||a.cookiePolicy.fadeIn(a.time),a.closeCookiePolicy.on("click",function(b){b.preventDefault(),a.cookiePolicy.fadeOut(a.time),c.cookie(a.name,!0,{path:"/",expires:a.daysExpire})})}}}(window,document,jQuery),responsiveGlobal=function(a,b,c){return{init:function(){helpers.fixBackgroundScrollingMobile(b.getElementsByClassName("st-pusher")[0]),helpers.fixBackgroundScrollingMobile(b.getElementsByClassName("st-pusher-filters")[0]),helpers.fixBackgroundScrollingMobile(b.getElementsByClassName("st-pusher-cart")[0])}}}(window,document,jQuery),buyRelatedProducts=function(a,b,c){var d={rowProduct:c(".row-product","#modal-buy-similars"),iCheckProducts:c(".icheck-related"),_d:c(b),labelSubtotal:c(".subtotal-related"),form:c("#form-buy-related"),button:c(".btn-purchase-related"),gridsSelection:c(".grid-select-related","#modal-buy-similars")};return{init:function(){var a=this;this.updateProductsSum(),this.gridsSelection(),d._d.on("ifChecked ifUnchecked click",".icheck-related",function(){a.updateProductsSum()})},updateProductsSum:function(){var a=this,b=this.getProductsSelectedSum();0==b?d.button.attr("disabled","disabled").addClass("disabled"):d.button.removeAttr("disabled").removeClass("disabled"),d.labelSubtotal.html("R$ "+a.formatMoney(b,2,",","."))},getProductsSelectedSum:function(){var a=0;return d.iCheckProducts.each(function(b,d){var e=c(this),f=parseFloat(e.closest(".row-product").find(".price.active:first").data("price"));e.is(":checked")&&(a+=f)}),a},getCombinationOfRow:function(a){var b="",d=a.find(".grid-select-related");return 0==d.length?c(".option-product:first").data("option-id"):(c.each(d,function(a){var d=c(this);b+=d.val()+"-"}),b.substring(0,b.length-1))},formatMoney:function(a,b,c,d){var e=a,b=isNaN(b=Math.abs(b))?2:b,c=void 0==c?".":c,d=void 0==d?",":d,f=0>e?"-":"",g=parseInt(e=Math.abs(+e||0).toFixed(b))+"",h=(h=g.length)>3?h%3:0;return f+(h?g.substr(0,h)+d:"")+g.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(e-g).toFixed(b).slice(2):"")},gridsSelection:function(){var a=this;d.gridsSelection.on("change",function(){var b=c(this),d=b.closest(".row-product"),e=a.getCombinationOfRow(d),f=d.find('.price[data-combinations="'+e+'"]');d.find(".price").hide().removeClass("active"),f.show().addClass("active"),d.find(".icheck-related").val(f.data("option-id")),a.updateProductsSum()})}}}(window,document,jQuery),fastCart=function(a,b,c){var d={_document:c(b),error:c(".cart-error",a.parent.document),infoShipment:c(".info-shipment",a.parent.document),infoShipmentPrice:c(".info-shipment-price",a.parent.document),empty:c(".empty-mini-cart",a.parent.document),target:c("#body-fast-cart",a.parent.document),template:c("#template-fast-cart",a.parent.document).html(),labelDropdownQtd:c(".cart-dropdown-qtd",a.parent.document),cartInstallments:c(".js-cart-installments",a.parent.document),cartValues:c(".js-cart-values",a.parent.document),labelDropdownSubtotal:c(".cart-dropdown-subtotal",a.parent.document),modalFastBuy:c("#modal-fast-buy"),formPurchase:c(".form-purchase-product"),modalQuickView:c("#modal-quick-view",a.parent.document),overlay:c(".bg-overlay",a.parent.document),modalTitle:"",productName:"",buttonsFastCart:c(".buttons-mini-cart .btn",a.parent.document),skipToCart:!1,skipToCheckout:!1};return{customerId:null,init:function(){var a=this;fastCart.items.get(),a.addControls(),a.addRelatedControls(),a.quantityControls(),a.deleteControls(),Mustache.parse(d.template)},addControls:function(){var b=a.checkout.cart.token;d._document.on("click",".btn-purchase-box",function(e){e.preventDefault();var f=c(this),g=f.data("product-name"),h={product_option_id:[f.data("option-id")],quantity:[1],cart_token:b,utm_source:a.session.utm_source,utm_campaign:a.session.utm_campaign,utm_name:a.session.customer.name,utm_email:a.session.customer.email,has_recomm:f.data("has-recomm"),skipShipment:!0,metadata:{source_platform:"store_v1"}};a.mago_config.recomm_id&&(h.item_metadata=[{recomm_id:a.mago_config.recomm_id}]),fastCart.items.add(h),d.modalTitle="Produto",d.productName=g,f.data("skip-to")&&("cart"==f.data("skip-to")?d.skipToCart=!0:d.skipToCheckout=!0),d.overlay.show()}),d._document.on("submit","#form-purchase-product",function(e){e.preventDefault();var f=c(this),g=f.closest(".inner-product").find(".name-product").first().text(),h=f.serializeJSON();h.cart_token=b,h.utm_source=a.session.utm_source,h.utm_campaign=a.session.utm_campaign,h.utm_name=a.session.customer.name,h.utm_email=a.session.customer.email,h.has_recomm=a.product?a.product.has_recomm:!1,h.skipShipment=!0,h.metadata={source_platform:"store_v1"},a.mago_config.recomm_id&&(h.item_metadata=[{recomm_id:a.mago_config.recomm_id}]),"undefined"!=typeof a.productPayload&&gtag("event","add_to_cart",{send_to:"googlePixel",ecomm_prodid:h.product_option_id[0],ecomm_pagetype:"product",ecomm_totalvalue:a.productPayload.productPriceTo,ecomm_category:a.productPayload.productCategoryName||a.productPayload.productDepartmentName,items:{id:h.product_option_id[0],name:a.productPayload.productName,category:a.productPayload.productCategoryName||a.productPayload.productDepartmentName,google_business_vertical:"retail",quantity:h.quantity[0],ecomm_prodid:h.product_option_id[0],ecomm_pagetype:"product",ecomm_totalvalue:a.productPayload.productPriceTo,ecomm_category:a.productPayload.productCategoryName||a.productPayload.productDepartmentName}}),fastCart.items.add(h),f.hasClass("form-purchase-look")?d.modalTitle="Conjunto":d.modalTitle="Produto",d.productName=g,f.data("skip-to")&&("cart"==f.data("skip-to")?d.skipToCart=!0:d.skipToCheckout=!0),d.overlay.show()}),d._document.on("submit","#form-purchase-product-kit",function(e){e.preventDefault(),e.stopPropagation();var f=c(this),g=f.serializeJSON();g.cart_token=b,g.utm_source=a.session.utm_source,g.utm_campaign=a.session.utm_campaign,g.utm_name=a.session.customer.name,g.utm_email=a.session.customer.email,g.skipShipment=!0,g.metadata={source_platform:"store_v1"},a.mago_config.recomm_id&&(g.item_metadata=[{recomm_id:a.mago_config.recomm_id}]),fastCart.items.add(g),d.modalTitle="Kit",d.productName="",f.data("skip-to")&&("cart"==f.data("skip-to")?d.skipToCart=!0:d.skipToCheckout=!0),d.overlay.show()}),d.modalFastBuy.find(".btn-continue").on("click",function(a){a.preventDefault(),c(this).closest(".modal").find(".close-modal").trigger("click"),d.modalQuickView.fadeOut(),d.overlay.fadeOut()}),d._document.on("cart.items.created",function(b){d.modalFastBuy.find(".title-fast-buy").html(d.modalTitle),d.modalFastBuy.find(".subtitle-fast-buy").show(),d.modalFastBuy.find(".container-buttons").show(),d.modalFastBuy.find(".buttons-fast-buy").show(),d.modalFastBuy.find(".name-product").html(d.productName),d.modalFastBuy.find(".error-fast-buy").hide(),c.each(d.formPurchase,function(a,b){var b=c(b);b[0].reset(),b.find("select").SelectSkin("reset")}),d.skipToCart?a.location=a.checkout.cart.full_endpoint:d.skipToCheckout?a.location=a.checkout.cart.full_endpoint_checkout:modal.show(d.modalFastBuy)}),d._document.on("cart.item.created.error",function(a,b){d.modalFastBuy.find(".title-fast-buy").html("Oops. Ocorreu um erro."),d.modalFastBuy.find(".subtitle-fast-buy").hide(),d.modalFastBuy.find(".container-buttons").hide(),d.modalFastBuy.find(".name-product").html(d.productName),b.message[0]&&d.modalFastBuy.find(".error-fast-buy").show().html(b.message[0].message?b.message[0].message:b.message),modal.show(d.modalFastBuy)})},addRelatedControls:function(){var b=a.checkout.cart.token;d._document.on("submit","#form-buy-related",function(e){e.preventDefault();var f=c(this),g=f.serializeJSON();g.cart_token=b,g.utm_source=a.session.utm_source,g.utm_campaign=a.session.utm_campaign,g.utm_name=a.session.customer.name,g.utm_email=a.session.customer.email,g.has_recomm=a.product?a.product.has_recomm:!1,g.skipShipment=!0,g.metadata={source_platform:"store_v1"},a.mago_config.recomm_id&&(g.item_metadata=[{recomm_id:a.mago_config.recomm_id}]),fastCart.items.add(g),d.skipToCart=!0,d.overlay.addClass("loading").show()})},quantityControls:function(){d._document.on("keyup",".product-mini-cart .input-qtd",c.debounce(400,function(a){var b=c(this),d=b.closest(".item-cart"),e=b.val().replace(/[^0-9\.]/g,"");e=0>=e?e=1:e,b.val(e),""!=e&&fastCart.items.update(d,e)})),d._document.on("click",".product-mini-cart .switch-control",function(a){a.preventDefault();var b,d=c(this),e=d.closest(".item-cart"),f=e.find(".input-qtd").val();b=d.hasClass("more")?parseInt(f)+1:parseInt(f)-1,b>0&&fastCart.items.update(e,b)})},deleteControls:function(){d._document.on("click",".product-mini-cart .delete-item",function(a){a.preventDefault();var b=c(this),d=b.closest(".item-cart");fastCart.items["delete"](d)})},items:{get:function(){var b={cart_token:a.checkout.cart.token,utm_source:a.session.utm_source,utm_campaign:a.session.utm_campaign,utm_name:a.session.customer.name,utm_email:a.session.customer.email};fastCart.items.request("/","GET",b,"cart.items.requested")},add:function(a){a=this.itemsForCustomizationSkip(a),fastCart.items.request("/items","POST",a,"cart.items.created")},itemsForCustomizationSkip:function(b){return"1"!==b.can_skip_customization||a.product.customization&&a.product.customization.open||delete b.customization,b},update:function(b,c){var d={product_option_id:b.data("id"),quantity:c,oldQuantity:b.data("quantity"),cart_token:a.checkout.cart.token,utm_source:a.session.utm_source,utm_campaign:a.session.utm_campaign,utm_name:a.session.customer.name,utm_email:a.session.customer.email,skipShipment:!0};if(b.data("custom")){var e=this.getCustomizationByCartItemId(b.data("id"));for(var f in e)""!=e[f].selected_value&&(d["customization["+b.data("option-id")+"]["+e[f].id+"]"]=e[f].selected_value)}fastCart.items.request("/items/"+b.data("id"),"PUT",d,"cart.items.updated",b)},getCustomizationByCartItemId:function(b){var d=[];return c.each(a.cart.items,function(a,c){c.id==b&&(d=c.customizations)}),d},"delete":function(b){var c={product_option_id:b.data("id"),cart_token:a.checkout.cart.token,utm_source:a.session.utm_source,utm_campaign:a.session.utm_campaign,utm_name:a.session.customer.name,utm_email:a.session.customer.email,skipShipment:!0};fastCart.items.request("/items/"+b.data("id")+"/delete","delete",c,"cart.items.deleted",b)},request:function(b,e,f,g,h){var i=this,j=a.checkout.cart.endpoint+b;"cart.items.requested"==g&&(j=a.checkout.cart.json),"cart.items.created"==g&&(j=a.checkout.cart.items),("cart.items.updated"==g||"cart.items.deleted"==g)&&(j=a.checkout.cart.endpoint.split("?")[0]+b),f.store_token=a.Store.token,c.ajax({url:j,type:e,data:f,beforeSend:function(){h&&(h.data("kit-id")&&(h=c('.item-cart[data-kit-id="'+h.data("kit-id")+'"')),i.showItemLoader(h))},success:function(b){if(d.error.hide(),d._document.trigger(g,b),b.cart&&(a.cart=b.cart,i.updateCart(g,b,h),"cart.items.created"==g)){for(var e=f.product_option_id[0],j=(f.quantity[0],0);j<b.cart.items.length;j++){var k=b.cart.items[j];if(e==k.product_option_id){googleAnalytics.handleDispatch("ec:addProduct",{id:k.product_option_id,name:k.name,brand:k.brand.name,price:k.price,quantity:k.quantity}),googleAnalytics.handleDispatch("ec:setAction","add");for(var l=[k.product_option_id],m=a.facebookPixels,n={content_ids:l,content_type:"product",value:k.price,currency:"BRL"},o=0;o<m.length;o++)"default"==m[o].facebook_type?fbq("trackSingle",m[o].pixel_id,"AddToCart",n):fbApi("AddToCart",m[o].id,n);var p="cart_fb_"+k.cart.id+"_AddToCart";c.cookie(p,l,{path:"/",domain:a.Store.domain})}}d._document.trigger("event:addToCart",b)}"cart.items.requested"!=g&&googleAnalytics.handleDispatch("send","event","Cart",g)},error:function(a){if(void 0!=a.responseText){var b=c.parseJSON(a.responseText);b.oldQuantity>0&&h&&h.find(".input-qtd").val(b.oldQuantity),d._document.trigger("cart.item.html.updated"),"cart.items.created"==g?d._document.trigger("cart.item.created.error",b):d.error.show().html(b.message)}}}).always(function(a){h&&i.hideItemLoader(h)})},updateCart:function(a,b,e){var f=this,g="",h=0;c.each(b.cart.items,function(a,b){h+=b.quantity}),d.labelDropdownQtd.html(h),d.cartInstallments&&d.cartInstallments.html("em até "+b.cart.installments.text),d.labelDropdownSubtotal.html(b.cart.prices.subtotal_formated),0==h?f.disableCart():(f.enableCart(),d.template&&(b.item&&e?(b.item.hasCustomization=!1,b.item.customizations&&b.item.customizations.length>0&&(b.item.hasCustomization=!0),g+=Mustache.render(d.template,b.item),e.removeClass("loading").replaceWith(g)):(c.each(b.cart.items,function(a,b){b.hasCustomization=!1,b.customizations&&b.customizations.length>0&&(b.hasCustomization=!0),g+=Mustache.render(d.template,b)}),d.target.html(g)))),d._document.trigger("cart.item.html.updated")},disableCart:function(){d.empty.show(),d.cartInstallments.html(""),d.cartValues.hide(),d.buttonsFastCart.addClass("disabled"),d.target.hide(),d.infoShipment.hide()},enableCart:function(){d.empty.hide(),d.cartValues.show(),d.buttonsFastCart.removeClass("disabled"),d.target.show()},showItemLoader:function(a){a.addClass("loading")},hideItemLoader:function(a){a.removeClass("loading")}}}}(window,document,jQuery),productReviews=function(a,b,c){var d={btnLoadMore:c(".product-reviews .btn-load-more-reviews"),holderReviews:c(".product-reviews .holder-reviews"),holderBoxes:c(".product-reviews .holder-boxes-reviews"),form:c("#form-reviews")};return{currentPage:1,init:function(){this.loadMoreReviews(),this.form()},loadMoreReviews:function(){var a=this;d.btnLoadMore.on("click",function(b){b.preventDefault();c(this);a.currentPage++,c.ajax({url:d.holderReviews.data("pagination-url"),type:"get",data:{page:a.currentPage},beforeSend:function(){overlay.show()}}).done(function(b){overlay.hide(),d.holderBoxes.append(b.reviews),a.currentPage==d.holderReviews.data("last-page")&&d.btnLoadMore.hide()})})},form:function(){d.form.on("submit",function(){var a=c(this),b=a.find("button").text(),d=(a.find(".inputs-area"),a.find(".success"));c.ajax({url:"/ajax/produtos/avaliacoes",type:"post",dataType:"json",data:a.serialize(),beforeSend:function(){a.find("button").html("").addClass("sending")}}).done(function(c){d.show(),a.find("button").html(b).removeClass("sending"),a[0].reset()})})}}}(window,document,jQuery),quickView=function(a,b,c){var d={box:c(".box-product"),d:c(b),modalQuickView:c("#modal-quick-view",a.parent.document),btnCloseQuickView:c("#modal-quick-view .close-modal",a.parent.document)};return{init:function(){var b=(d.box.find(".btn-quick-view"),this);a.chaordic_meta&&b.chaordic(),d.d.on("click",".btn-quick-view",function(a){a.preventDefault();var b=c(this),e=b.attr("href")+"?quickView=true";d.modalQuickView.find(".product-content").html('<iframe src="'+e+'" frameborder="0" class="iframe-product" scrolling="no"></iframe>'),modal.show(d.modalQuickView),d.d.trigger("quickview.opened",{productId:b.data("product-id")})})},fillQuickViewModal:function(a){d.modalQuickView.find(".product-content").html(a)},chaordic:function(){d.d.on("quickview.opened",function(a,b){chaordic.push(["viewProduct",{id:b.productId}])})}}}(window,document,jQuery),tabs=function(a,b,c){var d={tabContainer:c(".tab-content"),tabTrigger:".tab-trigger",_document:c(b)};return{init:function(){d._document.on("ifChecked click",".tab-trigger",function(a){var b=c(this),e=b.data("target");a.preventDefault(),c(d.tabTrigger).removeClass("active"),b.addClass("active"),d.tabContainer.hide(),c("#"+e).show()})}}}(window,document,jQuery),shipment=function(a,b,c){var d={formSingleProductShipment:c("form#calc-shipment-product"),modalShipment:c("#modal-shipment"),optionToCart:c("#option-to-cart"),labelError:c(".error-shipment-product"),tbody:c(".table-shipment-options tbody"),d:c(b)};return{init:function(){var b=this;a.zipcode.length&&d.formSingleProductShipment.find(".zipcode").val(a.zipcode),d.formSingleProductShipment.on("submit",function(){var e=c(this),f=e.find(".zipcode").val(),g=c(".form-purchase-product:visible:first"),h=1,i=d.optionToCart.val();g.length>0&&(h=g.find(".input-quantity").val()),(0>=h||!h)&&(h=1),c.ajax({url:"/ajax/frete/calcular",type:"post",dataType:"json",data:{zipcode:f,product_option_id:i,quantity:h,_token:a.TOKEN},beforeSend:function(){overlay.show()}}).done(function(a){googleAnalytics.handleDispatch("send","event","Frete","Calcular na página de produto"),googleAnalytics.handleDispatch("bubbTracker.send","event","Frete","Calcular na página de produto"),d.labelError.hide(),b.fillModal(a,f),d.modalShipment.fadeIn(),d.d.trigger("product.shipment.calculed")}).error(function(a){d.d.trigger("product.shipment.error"),a.message||(a=JSON.parse(a.responseText)),d.labelError.show().html(a.message),overlay.hide()})})},fillModal:function(a,b){var c=this;d.modalShipment.find(".shipment-zipcode").html(b),d.modalShipment.find(".shipment-city").html(a.city+" - "+a.uf),d.tbody.html(c.getTableHtml(a.data))},getTableHtml:function(a){var b="";return c.each(a,function(a,c){b+="<tr>",b+='<td class="type shipment-name '+c.service_display_name+'">'+c.service_display_name+"</td>",b+='<td class="time">'+c.formated_delivery_time+"</td>",b+='<td class="value">'+c.formated_price+"</td>",b+="</tr>"}),b}}}(window,document,jQuery),comments=function(a,b,c){var d={modalComments:c("#modal-comments"),form:c("#form-comments"),_d:c(b)};return{init:function(){var a=this;d._d.on("submit","#form-comments",function(){a.send(c(this))})},send:function(a){var b=a.find("button").text(),d=(a.find(".inputs-area"),a.find(".success"));c.ajax({url:"/ajax/produtos/comentarios",type:"post",dataType:"json",data:a.serialize(),beforeSend:function(){a.find("button").html("").addClass("sending")}}).done(function(c){d.show(),a.find("button").html(b).removeClass("sending"),a[0].reset()})}}}(window,document,jQuery),kits=function(a,b,c){var d={_document:c(b),rowKit:c(".row-kit"),gridsSelection:c(".grid-select-kit")};return{init:function(){this.updateRowsPrices(),this.gridsSelection(),c(".grid-select-kit").each(function(){c(this).trigger("change")})},updateRowsPrices:function(){var a=this;d.rowKit.each(function(){var b=c(this),d=b.find(".label-total"),e=b.find(".label-together"),f=b.find(".label-economy"),g=b.find(".box-product-kit"),h=0,i=(b.find(".btn-buy-kit"),b.find(".form-kit"));"/carrinho/adicionar?"+i.serialize();g.each(function(){var b=c(this),d=b.find(".price.active"),e=parseFloat(d.data("price"));h+=e,d.data("blocked")?a.blockBoxProduct(b):a.unblockBoxProduct(b)});var j=a.getKitDiscount(b.data("discount-value"),b.data("type-discount"),h),k=parseFloat(h-j);d.html("R$ "+helpers.formatMoney(h,2,",",".")),e.html("R$ "+helpers.formatMoney(k,2,",",".")),f.html("R$ "+helpers.formatMoney(h-k,2,",",".")),b.find('.price.active[data-blocked="1"]').length>0?(a.blockBuyButton(b),a.removeRow(b)):a.unblockBuyButton(b)})},removeRow:function(a){a.remove()},blockBuyButton:function(a){a.find(".btn-buy-kit").attr("disabled","disabled").addClass("disabled")},unblockBuyButton:function(a){a.find(".btn-buy-kit").removeClass("disabled").removeAttr("disabled")},blockBoxProduct:function(a){a.find(".alert-unavailable").show()},unblockBoxProduct:function(a){a.find(".alert-unavailable").hide()},getKitDiscount:function(a,b,c){return"v"==b?a:a*c/100},getCombinationOfRow:function(a){var b="",d=a.find(".grid-select-kit");return c.each(d,function(a){var d=c(this);b+=d.val()+"-"}),b.substring(0,b.length-1)},gridsSelection:function(){var a=this;d.gridsSelection.on("change",function(){var b=c(this),d=b.closest(".box-product-kit"),e=a.getCombinationOfRow(d),f=d.find('.price[data-combinations="'+e+'"]'),g=d.find(".kit-photo-product"),h=d.find('.kit-photo-product[data-option-id="'+f.data("option-id")+'"]:first');h.length&&(g.hide(),h.show()),a.combinationKitIsValid(e,d)?(d.find(".price").removeClass("active"),f.addClass("active"),d.find(".option-to-cart").val(f.data("option-id")),d.find(".input-customization").attr("disabled","disabled"),d.find(".input-customization:visible").removeAttr("disabled"),a.updateRowsPrices()):(a.blockBuyButton(d.closest(".row-kit")),a.blockBoxProduct(d))})},combinationKitIsValid:function(a,b){var c=b.find('div[data-combinations="'+a+'"]');return c.length>0&&0==c.data("blocked")?!0:!1}}}(window,document,jQuery),categories=function(a,b,c){var d={itemNav:c('.item-nav[data-filters="true"]'),_window:c(a),_smooth:c(".smooth-scroller")};return{init:function(){var a=this;d.itemNav.on("mouseenter",function(){var a=c(this),b=a.find(".filters-list"),d=a.data("filters-url");a.data("loaded")||c.ajax({url:d,type:"get"}).done(function(c){b.html(c),a.data("loaded",!0),a.trigger("loaded")})}),a.getReleases()},getReleases:function(){var a=c(".js-category-releases");if(a.length){var b=c(".js-release-link");b.on("click",null,function(){var a=c(this),e=a.data("url"),f=a.parent().data("limit"),g=a.parent().data("carousel"),h=c("#js-release-products"),i='<div class="holder-dots loading"><div class="dots grey big"><div class="dot dot-1"></div><div class="dot dot-2"></div><div class="dot dot-3"></div></div></div>';h.html(i),b.parent().removeClass("is-active"),a.parent().addClass("is-active"),e=helpers.addParamToURL(e,"sort_by","newest"),e=helpers.addParamToURL(e,"limit",f),e=helpers.addParamToURL(e,"onlyBoxes",1),c.ajax({url:e,method:"GET"}).done(function(a){a.length&&(h.html(a),g&&"function"==typeof plugins.owlReleaseProduct&&(h.find(".holder-grids").addClass("js-owl-release-products owl-carousel owl-theme"),plugins.owlReleaseProduct()),plugins.lazyload(),d._window.trigger("scroll"),d._smooth.trigger("scroll"))})}),b.first().trigger("click")}}}}(window,document,jQuery),products=function(a,b,c){var d={_window:c(a),_body:c("body"),rightCategory:c(".right-category"),waypointTrigger:c(".waypoint-load-more"),spinner:c(".spinner-load-more"),_smooth:c(".smooth-scroller"),loadMore:!1,currentPage:1,waypoint:""};return{init:function(){var e=this,f=c(b);this.productCustomization(),this.startPlugins(),this.loadFilters(),f.on("ready",function(){e.infiniteScroll()});var g="ifChecked ifUnchecked click change",h=".trigger-filter";f.on(g,h,function(b){b.preventDefault();var d=c(this);"ifChecked"==b.type?queryString=helpers.search_add(d.attr("name"),d.val()):"ifUnchecked"==b.type&&(queryString=helpers.search_remove(d.attr("name"),d.val())),"?"==queryString&&(queryString=""),url=decodeURI(a.location.pathname+queryString),helpers.getParamURLByName("page")&&(url=helpers.removeParamFromURL(url,"page")),e.loadProducts(url),e.resetCurrentPage()}),f.on("click",".bar-pagination .pagination a",function(a){a.preventDefault();var b=(c(this),decodeURI(this.href));e.loadProducts(b)}),f.on("click",".selected-filters .close-tag",function(b){b.preventDefault();var d=c(this),f=d.data("tag-value"),g=d.data("type"),h=c("."+g+' .trigger-filter[value="'+f+'"]');if(d.hasClass("filter-price")){var i=a.location.href,i=helpers.removeParamFromURL(i,"min"),i=helpers.removeParamFromURL(i,"max");helpers.getParamURLByName("page")&&(i=helpers.removeParamFromURL(i,"page")),e.loadProducts(i),e.loadFilters()}else h.iCheck("toggle");e.resetCurrentPage()}),f.on("change",".select-order-products",function(){var b,d=c(this),f=d.find(":selected").val();""==f?b=helpers.removeParamFromURL(a.location.href,"sort_by"):(b=helpers.removeParamFromURL(a.location.href,"sort_by"),b=helpers.addParamToURL(a.location.href,"sort_by",f)),helpers.getParamURLByName("page")&&(b=helpers.removeParamFromURL(b,"page")),e.loadProducts(b),e.resetCurrentPage()}),f.on("pjax:send",function(){d.loadMore?d.spinner.show():overlay.show()}),f.on("pjax:complete",function(){if(d.loadMore){var a=c(".container-load-products.last > *");d.spinner.hide(),a.unwrap(),e.enableWaypoint(),d.loadMore=!1}else d._smooth.animate({scrollTop:0},100),overlay.hide();e.startPlugins()}),f.on("pjax:timeout",function(a){a.preventDefault()})},productCustomization:function(){var b=this,d=c(".js-customization-trigger"),e=c(".js-input-customization");e.length&&(c(a).on("customization:handleRequiredAttribute",function(a){b.disableCustomizationInputRequiredAttribute(),b.setCustomizationInputAttributes(c(a.target))}),d.length&&(c(".js-holder-customizations.allow-sell").hide(),b.disableCustomizationInputRequiredAttribute(),d.on("click",function(){var e=c(this).data("option-id"),f=c('.js-holder-customizations[data-option-id="'+e+'"]'),g=d.find(".fa-angle-down");a.product.customization||(a.product.customization={open:!1}),"block"==f.css("display")?(b.disableCustomizationInputRequiredAttribute(),b.clearCustomizationFields(),f.hide(),g.css({transform:""}),a.product.customization.open=!1):(f.show(),g.css({transform:"rotate(180deg)"}),b.setCustomizationInputAttributes(f),b.calcCustomizationValue(),a.product.customization.open=!0)})),b.customizationInputValidator(),e.on("change keyup",function(){c(this).removeClass("placeholder"),""==c(this).val()&&c(this).addClass("placeholder"),b.calcCustomizationValue()}),e.trigger("change"))},customizationInputValidator:function(){c(".js-holder-customizations").find("input").on("keyup change",function(){var a={letters:/[^a-zA-ZáàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ.!@#$%^&*()_?“{} ]/g,numbers:/[^0-9 ]/g,all:/[^a-zA-ZáàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ.!@#$%^&*()_?“{}0-9 ]/g},b=c(this),d=b.attr("maxLength")||0;b.val(b.val().replace(a[b.data("type")],"").slice(0,d))})},calcCustomizationValue:function(){var a=0,b=c(".js-total-customization");return c(".js-input-customization").each(function(){var b=c(this);"none"!=b.closest(".js-holder-customizations").css("display")&&(b.val()&&(a+=parseFloat(b.data("price"))),0>a&&(a=0))}),a?(b.show(),void b.find("span").html("R$ "+a.toFixed(2).toString().replace(".",","))):void b.hide()},disableCustomizationInputRequiredAttribute:function(){c(".js-holder-customizations.allow-sell").find("input, select").prop("required",!1)},setCustomizationInputAttributes:function(a){a.find("input, select").each(function(){var a=c(this);a.prop("required","required"===a.data("required")).removeAttr("disabled")})},clearCustomizationFields:function(){c(".js-input-customization").each(function(){c(this).val("").trigger("change")})},loadProducts:function(b){var d=!(!a.history||!history.pushState);d?(c.pjax({url:b,container:".content-products"}),googleAnalytics.handleDispatch("send","pageview",a.location.pathname+a.location.search)):a.location=b},loadFilters:function(){var b=a.location.href,d=c(".content-filters-products");d.length&&c.ajax({url:b,type:"get",data:{onlyFilters:!0}}).done(function(a){d.html(a),plugins.startPluginsForFiltersNav()})},infiniteScroll:function(){var a=this;d.waypointTrigger.length>0&&(d.waypoint=new Waypoint({element:d.waypointTrigger,context:d._smooth.length>0?d._smooth:c("body"),handler:function(b){helpers.isMobile.hasWidth()&&a.loadMore()},offset:"100%"}))},loadMore:function(){var b=this,e=c(".pagination, .bar-pagination"),f=a.location.href,g="",h=!0,i=parseInt(helpers.getParamURLByName("page")),j=!(!a.history||!history.pushState);null==helpers.getParamURLByName("page")&&(i=d.currentPage),g=helpers.addParamToURL(f,"page",i+1),d.currentPage=d.currentPage+1,i<a.LAST_PAGE?(a.hidePageInURL&&(h=!1),b.disableWaypoint(),j?(d.loadMore=!0,c(".holder-products:last").append('<div class="container-load-products last"></div>'),c.pjax({url:g,push:h,scrollTo:!1,container:".container-load-products.last"}),googleAnalytics.handleDispatch("send","pageview",g)):e.show()):d._body.addClass("disable-loadmore")},disableWaypoint:function(){d.waypoint&&d.waypoint.disable()},enableWaypoint:function(){d.waypoint&&d.waypoint.enable()},resetCurrentPage:function(){d.currentPage=1},startPlugins:function(){var a=this;plugins.startPluginsForNav(),grids.loadGrid(),a.enableWaypoint(),d.spinner=c(".spinner-load-more")}}}(window,document,jQuery);!function(a){if("function"==typeof define&&define.amd)define(["jquery"],a);else if("object"==typeof exports){var b=require("jquery");module.exports=a(b)}else a(window.jQuery||window.Zepto||window.$)}(function(a){"use strict";a.fn.serializeJSON=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return c=a.serializeJSON,d=this,e=c.setupOpts(b),f=d.serializeArray(),c.readCheckboxUncheckedValues(f,e,d),g={},a.each(f,function(a,b){h=b.name,i=b.value,k=c.extractTypeAndNameWithNoType(h),l=k.nameWithNoType,m=k.type,m||(m=c.attrFromInputWithName(d,h,"data-value-type")),c.validateType(h,m,e),"skip"!==m&&(n=c.splitInputNameIntoKeysArray(l),j=c.parseValue(i,h,m,e),o=!j&&c.shouldSkipFalsy(d,h,l,m,e),o||c.deepSet(g,n,j,e))}),g},a.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(a){return String(a)},number:function(a){return Number(a)},"boolean":function(a){var b=["false","null","undefined","","0"];return-1===b.indexOf(a)},"null":function(a){var b=["false","null","undefined","","0"];return-1===b.indexOf(a)?a:null},array:function(a){return JSON.parse(a)},object:function(a){return JSON.parse(a)},auto:function(b){return a.serializeJSON.parseValue(b,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(b){var c,d,e,f,g,h;h=a.serializeJSON,null==b&&(b={}),e=h.defaultOptions||{},d=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(c in b)if(-1===d.indexOf(c))throw new Error("serializeJSON ERROR: invalid option '"+c+"'. Please use one of "+d.join(", "));return f=function(a){return b[a]!==!1&&""!==b[a]&&(b[a]||e[a])},g=f("parseAll"),{checkboxUncheckedValue:f("checkboxUncheckedValue"),parseNumbers:g||f("parseNumbers"),parseBooleans:g||f("parseBooleans"),parseNulls:g||f("parseNulls"),parseWithFunction:f("parseWithFunction"),skipFalsyValuesForTypes:f("skipFalsyValuesForTypes"),skipFalsyValuesForFields:f("skipFalsyValuesForFields"),typeFunctions:a.extend({},f("defaultTypes"),f("customTypes")),useIntKeysAsArrayIndex:f("useIntKeysAsArrayIndex")}},parseValue:function(b,c,d,e){var f,g;return f=a.serializeJSON,g=b,e.typeFunctions&&d&&e.typeFunctions[d]?g=e.typeFunctions[d](b):e.parseNumbers&&f.isNumeric(b)?g=Number(b):!e.parseBooleans||"true"!==b&&"false"!==b?e.parseNulls&&"null"==b&&(g=null):g="true"===b,e.parseWithFunction&&!d&&(g=e.parseWithFunction(g,c)),g},isObject:function(a){return a===Object(a)},isUndefined:function(a){return void 0===a},isValidArrayIndex:function(a){return/^[0-9]+$/.test(String(a))},isNumeric:function(a){return a-parseFloat(a)>=0},optionKeys:function(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)c.push(b);return c},readCheckboxUncheckedValues:function(b,c,d){var e,f,g,h,i;null==c&&(c={}),i=a.serializeJSON,e="input[type=checkbox][name]:not(:checked):not([disabled])",f=d.find(e).add(d.filter(e)),f.each(function(d,e){if(g=a(e),h=g.attr("data-unchecked-value"),null==h&&(h=c.checkboxUncheckedValue),null!=h){if(e.name&&-1!==e.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+e.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");
b.push({name:e.name,value:h})}})},extractTypeAndNameWithNoType:function(a){var b;return(b=a.match(/(.*):([^:]+)$/))?{nameWithNoType:b[1],type:b[2]}:{nameWithNoType:a,type:null}},shouldSkipFalsy:function(b,c,d,e,f){var g=a.serializeJSON,h=g.attrFromInputWithName(b,c,"data-skip-falsy");if(null!=h)return"false"!==h;var i=f.skipFalsyValuesForFields;if(i&&(-1!==i.indexOf(d)||-1!==i.indexOf(c)))return!0;var j=f.skipFalsyValuesForTypes;return null==e&&(e="string"),j&&-1!==j.indexOf(e)?!0:!1},attrFromInputWithName:function(a,b,c){var d,e,f;return d=b.replace(/(:|\.|\[|\]|\s)/g,"\\$1"),e='[name="'+d+'"]',f=a.find(e).add(a.filter(e)),f.attr(c)},validateType:function(b,c,d){var e,f;if(f=a.serializeJSON,e=f.optionKeys(d?d.typeFunctions:f.defaultOptions.defaultTypes),c&&-1===e.indexOf(c))throw new Error("serializeJSON ERROR: Invalid type "+c+" found in input name '"+b+"', please use one of "+e.join(", "));return!0},splitInputNameIntoKeysArray:function(b){var c,d;return d=a.serializeJSON,c=b.split("["),c=a.map(c,function(a){return a.replace(/\]/g,"")}),""===c[0]&&c.shift(),c},deepSet:function(b,c,d,e){var f,g,h,i,j,k;if(null==e&&(e={}),k=a.serializeJSON,k.isUndefined(b))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!c||0===c.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");f=c[0],1===c.length?""===f?b.push(d):b[f]=d:(g=c[1],""===f&&(i=b.length-1,j=b[i],f=k.isObject(j)&&(k.isUndefined(j[g])||c.length>2)?i:i+1),""===g?(k.isUndefined(b[f])||!a.isArray(b[f]))&&(b[f]=[]):e.useIntKeysAsArrayIndex&&k.isValidArrayIndex(g)?(k.isUndefined(b[f])||!a.isArray(b[f]))&&(b[f]=[]):(k.isUndefined(b[f])||!k.isObject(b[f]))&&(b[f]={}),h=c.slice(1),k.deepSet(b[f],h,d,e))}}});var gandalf=function(a,b,c){var d={gandalfSelector:c(".gandalf:not(.mago)")};return{ignoredIds:[],learn:function(){var b=this;a.product&&a.gandalf_config.active&&gandalf.view(a.checkout.cart.token,a.product.id),a.gandalf_config.active&&b.startRecomm()},startRecomm:function(){var b=this,e=Math.floor(1e6*Math.random()+1),f=[];d.gandalfSelector.each(function(d,g){var h=c(this),i=(Object.keys(b.ignoredIds).map(function(a){return b.ignoredIds[a]}),{user_id:a.gandalf_config.user_id,total:h.data("total"),title:h.data("title"),page:h.data("page"),forceCategory:h.data("force-category")?!0:!1,session:e,onlyBox:h.data("only-box")?h.data("only-box"):!1,env:a.ENV,store_id:a.Store.id});a.product&&(i.item_id=a.gandalf_config.item_id),f.push({container:h,url:"https://gandalf.yampi.me/api/gandalf/recomm/"+h.data("type"),params:i})}),f.length&&b.syncronousRequests(f,0)},syncronousRequests:function(a,b){var d=this,e=new c.Deferred;b<a.length&&(a[b].deffered=e,d.request(a[b]),e.then(function(){d.syncronousRequests(a,b+1)}))},request:function(a){var b=this,d=a.container;a.params.ignoredIds=b.ignoredIds,c.ajax({url:a.url,type:"get",crossDomain:!0,data:a.params,beforeSend:function(){d.addClass("loading")}}).done(function(e){b.render(e,d,a.params),c.merge(b.ignoredIds,e.ids?e.ids:[])}).error(function(){d.remove()}).always(function(){a.deffered.resolve()})},render:function(a,b,d){var e=this;c.ajax({url:"/gandalf/render",method:"GET",data:{ids:a.data,params:d}}).done(function(a){var c=a.html;c.length?(b.removeClass("loading"),b.html(c),b.attr("data-ids",JSON.stringify(a.ids)),b.attr("data-loaded",!0),e.refreshLinks(),plugins.startPluginsForFiltersNav()):b.remove()})},refreshLinks:function(){var a=d.gandalfSelector.find("a");a.each(function(){var a=c(this),b=helpers.addParamToURL(a.attr("href"),"has_recomm",1);a.hasClass("btn-quick-view")&&(b=helpers.addParamToURL(b,"quickView",!0)),a.hasClass("btn-purchase-box")?a.attr("data-has-recomm",1):a.attr("href",b)})},view:function(b,d){c.ajax({url:"/gandalf/view",type:"get",data:{customerId:b,itemId:d,_token:a.TOKEN}})}}}(window,document,jQuery),mago=function(a,b,c){var d={magoSelector:c(".mago")};return{ignoredIds:[],learn:function(){var b=this;a.mago_config.active&&b.startRecomm()},startRecomm:function(){var b=this,e=Math.floor(1e6*Math.random()+1),f=[];d.magoSelector.each(function(d,g){var h=c(this),i=(Object.keys(b.ignoredIds).map(function(a){return b.ignoredIds[a]}),{user_id:a.mago_config.user_id,count:h.data("total"),title:h.data("title"),page:h.data("page"),forceCategory:h.data("force-category")?!0:!1,session:e,onlyBox:h.data("only-box")?h.data("only-box"):!1,store_id:a.Store.id});a.product&&(i.item_id=a.mago_config.item_id),f.push({container:h,url:"https://mago.yampi.io/v1/recomm/scenario/"+h.data("scenario"),params:i})}),f.length&&b.syncronousRequests(f,0)},syncronousRequests:function(a,b){var d=this,e=new c.Deferred;b<a.length&&(a[b].deffered=e,d.request(a[b]),e.then(function(){d.syncronousRequests(a,b+1)}))},request:function(a){var b=this,d=a.container;a.params.ignoredIds=b.ignoredIds,c.ajax({url:a.url,type:"get",crossDomain:!0,data:a.params,beforeSend:function(){d.addClass("loading")}}).done(function(e){b.render(e,d,a.params),c.merge(b.ignoredIds,e.items?e.items:[])}).error(function(){d.remove()}).always(function(){a.deffered.resolve()})},render:function(a,b,d){var e=this;c.ajax({url:"/mago/render",method:"GET",data:{ids:a.items,params:d,recomm_id:a.id}}).done(function(a){var c=a.html;c.length?(b.removeClass("loading"),b.html(c),b.attr("data-ids",JSON.stringify(a.items)),b.attr("data-loaded",!0),b.attr("data-recomm_id",a.recomm_id),e.refreshLinks(),plugins.startPluginsForFiltersNav()):b.remove()})},refreshLinks:function(){var a=d.magoSelector.find("a");a.each(function(){var a=c(this),b=helpers.addParamToURL(a.attr("href"),"has_recomm",1);b=helpers.addParamToURL(b,"recomm_id",a.closest(".mago").data("recomm_id")),a.hasClass("btn-purchase-box")?(a.attr("data-has-recomm",1),a.attr("data-recomm_id",a.data("recomm_id"))):a.attr("href",b)})}}}(window,document,jQuery),searchSuggest=function(a,b,c){var d={input:c(".input-search"),inputSpinner:c(".form-search .spinner"),_d:c(b)};return{init:function(){a.SearchConfig||(a.SearchConfig={disaled:!1,limit:4}),d.input.attr("autocomplete","off")},autoSuggest:function(){function b(a,b,d){""===a?0!=c.get("all").length&&(b(c.get("all")),d([])):(b([]),c.search(a,b,d))}var c=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(a){return a.id},prefetch:{url:a.Search.endpoint+"?json=true&q=&limit="+(a.SearchConfig.limit?a.SearchConfig.limit:4),filter:function(a){return a.data}},remote:{url:a.Search.endpoint+"?json=true&skipFilters=true&q=",replace:function(a,b){return d.inputSpinner.fadeIn(100),a+encodeURIComponent(b)},filter:function(a){return d.inputSpinner.fadeOut(100),a.data}},displayKey:"slug"}),e=Hogan.compile(['<div><div class="item-suggest clearfix">','<img src="{{firstImage.data.small.url}}" class="photo" width="78" height="66" />','<div class="inner-suggest">','<div class="brand-product">{{brand.data.name}}</div>','<div class="name-product">{{name}}</div>','<div class="price-product">{{#prices.data.price_discount > 0}}<span class="original-price">{{prices.data.price_sale_formated}}</span> <span class="discount-price"> {{prices.data.price_discount_formated}}</span> {{/prices.data.price_discount > 0}} {{^prices.data.price_discount > 0}} <span class="discount-price">{{prices.data.price_formated}} {{/prices.data.price_discount > 0}}',"</div></div></div>"].join(""));d.input.typeahead({highlight:!0,minLength:0,hint:!1},{name:"products-suggest",displayKey:"name",limit:a.SearchConfig.limit?a.SearchConfig.limit:4,source:b,templates:{header:'<h3 class="title-suggest">Produtos sugeridos:</h3>',footer:'<button type="submit" class="btn btn-see-all btn-block">ver todos os produtos</button>',empty:['<div class="empty-message">Nenhum produto encontrado</div>'].join("\n"),suggestion:function(a){return e.render(a)}}}),d.input.on("typeahead:selected",function(b,c,d){a.location="/"+c.slug+"/p"})}}}(window,document,jQuery),stockNotifications=function(a,b,c){var d={_document:c(b),modal:c(".modal.stock-notifications"),modalSuccess:c(".modal.stock-notifications-success"),form:c(".form-stock-notifications")};return{init:function(){var a=this;a.addProductInModal(),d._document.on("submit","#form-stock-notifications",function(){a.send(c(this))})},addProductInModal:function(){d._document.on("click",".js-stock-notifications",function(a){var b=c(this).data("product-name"),e=c(this).data("product-variation"),f=c(this).data("product-img"),g=c(this).data("product-sku");d.modal.find(".stock-notifications__product").html('<div class="product__photo"><img src="'+f+'" alt="'+b+'" class="product-photo" draggable="false"></div><div class="product__infos"><p class="product-name">'+b+'</p><p class="product-sku">'+e+"</p></div>"),d.form.find("input[name=sku_id]").val(g)})},send:function(a){var b=this;c.ajax({url:"/api/v2/stock-notifications",type:"post",dataType:"json",data:a.serialize(),beforeSend:function(){b.clearErros(a),a.find("button").addClass("sending")}}).done(function(c){a[0].reset(),b.showSuccess()}).error(function(a){var b=JSON.parse(a.responseText);b.fields&&c.each(b.fields,function(a,b){var d=c("input[name="+a+"]");d.addClass("input-error"),d.parent().find(".errors").html(b)})}).complete(function(b){a.find("button").removeClass("sending")})},clearErros:function(a){c(".errors",a).html(""),c("input, select").removeClass("input-error")},resetForm:function(){this.clearErros(),d.form[0].reset()},showSuccess:function(){d.modal.hide(),d.modalSuccess.show()}}}(window,document,jQuery),grids=function(a,b,c){var d={_document:c(b)};return{macy:null,init:function(){this.changeGrid()},loadGrid:function(){var a=c(".js-change-grids"),b=this;if(!a.length||!helpers.isMobile.hasWidth())return!1;switch("undefined"==typeof c.cookie("grid-products")&&c.cookie("grid-products",a.data("grid"),{expires:10}),c.cookie("grid-products")){case"list":gridType="list",nextGrid="mosaic",elHTML='<svg class="icon-grid-mosaic"><use xlink:href="#icon-grid-mosaic"></use></svg><span>Mosaico</span>',columns=1;break;case"mosaic":gridType="mosaic",nextGrid="list",elHTML='<svg class="icon-grid-list"><use xlink:href="#icon-grid-list"></use></svg><span>Lista</span>',columns=2;break;default:return!1}null!=b.macy&&b.macy.remove(),b.macy=Macy({container:".js-container-grids",trueOrder:!0,columns:columns}),c("body").removeClass(function(a,b){return(b.match(/\bgrid-\S+/g)||[]).join(" ")}).addClass("grid-"+gridType),a.data("grid",nextGrid).html(elHTML)},changeGrid:function(){var a=this;d._document.on("click",".js-change-grids",function(){c.cookie("grid-products",c(this).data("grid")),a.loadGrid()})}}}(window,document,jQuery),racks=function(a,b,c){var d={selector:c(".rack-loader"),_window:c(a)};return{init:function(a){d.selector.each(function(a,b){var e=c(b);c.ajax({url:e.data("url"),method:"GET"}).done(function(a){0==a.length?e.parent().remove():(e.html(a),e.data("carousel")&&e.trigger("destroy.owl.carousel").trigger("refresh.owl.carousel"),plugins.startPluginsForFiltersNav(),d._window.trigger("resize"))})})}}}(window,document,jQuery),mobileZoom=function(a,b,c){var d={_window:c(a),_document:c(b)};return{init:function(){var a=this;a.mobileZoom()},mobileZoom:function(){var a=this;d._document.ready(function(){var b=c(".js-owl-mobile-zoom"),e=c(".js-zoom-src");if(b.length&&e.length){var f=c(".js-zoom-mobile"),g='<div class="zoom-info js-zoom-info" style="display: none">clique para zoom</div>',h=f.find(".owl-stage-outer");d._window.width()<=700&&(h.length&&(h.append(g),g=c(".js-zoom-info"),g.fadeIn("slow")),b.children().length||(e.each(function(a){var d=c(this).data("zoom-image");b.append('<img id="zoom_'+a+'" data-src="'+d+'" alt="zoom" class="image-zoom owl-lazy">')}),a.owlMobileZoom())),f.find("img").on("click",function(){var b=c(this);if(d._window.width()<=700){var e=b.parent().parent().index();c(".js-modal-zoom").fadeIn(),c("body").css("overflow","hidden"),c(".smooth-scroller").css("overflow","hidden"),a.owlZoomMobile.trigger("to.owl.carousel",e),a.initImage("#zoom_"+e),g.fadeOut("slow")}}),c(".js-close-modal-zoom").on("click",function(){a.closeMobileZoom()})}})},initImage:function(a){var b=this;b.image=c(a),c(a).apImageZoom({cssWrapperClass:"holder-zoom-mobile",minZoom:"contain",maxZoom:1,loadingAnimation:"throbber",swipeRight:function(){e("prev")},swipeLeft:function(){e("next")},swipeBottom:function(){f()}});var e=function(a){var c=b.image.siblings().first().get(0).getBoundingClientRect().width,e=d._window.width();e>=c&&b.owlZoomMobile.trigger(a+".owl.carousel")},f=function(){var a=b.image.siblings().first().get(0).getBoundingClientRect().width,c=d._window.width();c>=a&&b.closeMobileZoom()}},closeMobileZoom:function(){c("body").css("overflow",""),c(".smooth-scroller").css("overflow",""),c(".js-modal-zoom").fadeOut()},owlMobileZoom:function(){var a=this;a.owlZoomMobile=c(".js-owl-mobile-zoom");var b=a.owlZoomMobile.data("owl-nav");a.owlZoomMobile.addClass("owl-theme owl-carousel").owlCarousel({dots:!0,nav:b,loop:!1,items:1,autoplay:!1,lazyLoad:!0,mouseDrag:!1,touchDrag:!1}),a.owlZoomMobile.on("changed.owl.carousel",function(b){a.initImage("#zoom_"+b.item.index),setTimeout(function(){d._window.trigger("scroll")},100)})}}}(window,document,jQuery),googleAnalytics=function(a,b,c){var d=[],e=[],f=[];return{init:function(){this.isV4()&&(this.startStoreAnalytics(),this.startYampiAnalytics(),this.syncCartItems(),this.synCartItemsByEvent(),this.listenForItemUpdate())},getRealCartItems:function(){try{return a.cart.items}catch(b){return[]}},getCartItems:function(){return f},setCartItems:function(a){c.isArray(a)&&(f=a)},getCartItemsIds:function(){var a={realIds:[],tempIds:[]};return this.getRealCartItems().forEach(function(b){a.realIds.push(b.id)}),this.getCartItems().forEach(function(b){a.tempIds.push(b.id)}),a},synCartItemsByEvent:function(){c(b).on("cart.items.requested",function(a,b){try{googleAnalytics.setCartItems(b.cart.items)}catch(c){}})},listenForItemUpdate:function(){c(b).on("cart.items.updated",function(a,b){try{googleAnalytics.dispatchV4("send","event","item.updated","",b.item)}catch(c){}})},syncCartItems:function(){var a=this.getRealCartItems();a.length&&(f=a)},getAddedItems:function(){var a=this.getCartItemsIds(),b=a.realIds.filter(function(b){return!a.tempIds.includes(b)}),d=this.getRealCartItems().filter(function(a){return b.includes(a.id)});return d.length?d:this.getRealCartItems().filter(function(a){return a.product_option_id==c("#option-to-cart").val()})},getRemovedItems:function(){var a=this.getCartItemsIds(),b=a.tempIds.filter(function(b){return!a.realIds.includes(b)});return this.getCartItems().filter(function(a){return b.includes(a.id)})},startStoreAnalytics:function(){try{var b=a.yampi.google.analytics.id;b&&d.push(b)}catch(c){}},startYampiAnalytics:function(){this.getYampiAnalytics(),e.forEach(function(a){gtag("config",a)})},getYampiAnalytics:function(){try{var a=yampi.google.analytics.yampiId;a&&e.push(a)}catch(b){}},handleDispatch:function(a,b,c,d,e,f,g){this.isUniversal()&&"function"==typeof ga&&this.ga(a,b,c,d,e,f,g),this.isV4()&&this.dispatchV4(a,b,c,d)},dispatchV4:function(a,b,c,f,g){if(this.isV4()&&this.isValidForV4Event(a,b)){var h=this,i=this.shouldTrackForYampi(a)?d.concat(e):d;i.forEach(function(a){var b=h.convertToGtag(a,c,f,g);b[1]&&gtag.apply(null,b)}),h.syncCartItems()}},isV4:function(){try{return a.yampi.google.analytics.version.includes("4")}catch(b){return!1}},isUniversal:function(){try{return a.yampi.google.analytics.version.includes("universal")}catch(b){return!1}},ga:function(a,b,c,d,e,f,g){var h=[a,b,c,d,e,f,g].filter(function(a){return a});return this.log("dispatching from GA module",h),ga.apply(null,h)},convertToGtag:function(a,b,c,d){var e=this.getEvent(b,c);return["event",e,this.getParam(a,e,d)]},getEvent:function(a,b){var c={"item.updated":"item_updated",Newsletter:"generate_lead",Frete:function(a){return"Calcular na página de produto"===a?"check_shipping_price":void 0},Cart:function(a){return"cart.items.created"===a?"add_to_cart":"cart.items.deleted"===a?"remove_from_cart":void 0}};return"function"==typeof c[a]?c[a](b)||"":c[a]||""},getParam:function(b,d,e){var f=this,g=this.addSendToParam(b),h={check_shipping_price:function(b){return b.url=a.location.pathname+a.location.search,b},add_to_cart:function(a){return c.extend(a,f.transformItemsIntoParams(f.getAddedItems()))},remove_from_cart:function(a){return c.extend(a,f.transformItemsIntoParams(f.getRemovedItems()))},item_updated:function(a,b){return c.extend(a,f.transformItemsIntoParams([b]))}};return"function"==typeof h[d]&&(g=h[d](g,e)),g},addSendToParam:function(a){return a?{send_to:a}:{}},isValidForV4Event:function(a,b){return"event"===b&&["send","bubbTracker.send"].includes(a)},shouldTrackForYampi:function(a){return"bubbTracker.send"===a},getItemBrand:function(a){try{return a.brand.name}catch(b){return""}},transformItemsIntoParams:function(a){if(!c.isArray(a)||!a.length)return{};var b=this,d=0,e=a.reduce(function(a,e){d+=e.price_total;var f=c.extend({item_id:e.option_id,item_name:e.name,item_brand:b.getItemBrand(e),item_variant:e.sku,quantity:e.quantity},b.extractCategoriesAsParams(e));return a.push(f),a},[]);return{currency:"BRL",value:d,items:e}},extractCategoriesAsParams:function(a){if(!a)return{};var b={};return a.categories_names.slice(0,5).forEach(function(a,c){var d="item_category"+(c?c+1:"");b[d]=a}),b},log:function(a){helpers.getParamURLByName("devMode")&&console.log(a)}}}(window,document,jQuery);!function(a,b,c){responsiveGlobal.init(),modal.init(),buyRelatedProducts.init(),fastCart.init(),quickView.init(),comments.init(),kits.init(),tabs.init(),shipment.init(),productReviews.init(),categories.init(),products.init(),gandalf.learn(),mago.learn(),searchSuggest.init(),stockNotifications.init(),grids.init(),racks.init(),mobileZoom.init(),googleAnalytics.init()}(window,document,jQuery);